function CargarFormularioCV(n){switch(n){case"Datos":$("#TituloModal").html("Datos");AbrirDatosModal();$("#lnkDatos").tab("show");break;case"Experiencia":$("#TituloModal").html("Experiencia");AbrirExperienciaModal();$("#lnkExperiencia").tab("show");break;case"Educacion":$("#TituloModal").html("Educacion");AbrirEducacionModal();$("#lnkEducacion").tab("show");break;case"Entrevistas":$("#TituloModal").html("Entrevistas");AbrirEntrevistaModal();$("#lnkEntrevistas").tab("show")}}function CargarContenidoModalCV(n,t){$("#pnlDialogCVBaseBody").load("/CV/Modal"+n,{idCV:$("#hidCVBase").val()},function(n,i){i=="success"?t&&t():CargarAlertas(frmModal)})}function SlideDesplegable(n){$("#"+n).hasClass("shown")?($("#"+n).slideUp(400),$("#"+n).removeClass("shown"),$("span",$(".desplegable")).removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")):($("#"+n).slideDown(400),$("#"+n).addClass("shown"),$("span",$(".desplegable")).removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"))}function AbrirDatosModal(){CargarContenidoModalCV("Datos")}function GuardarDatos(){return SaveDatos(function(n){$("#hidCVBase").val(n.idCV);$("#datos_id").val(n.idCV);$("#modo").val("EDICION");$("#DatosForm").off("submit").on("submit",EditarDatos);$("#tabCV > ul.nav-tabs > li.disabled").removeClass("disabled");$("#btnGuardarModalDatos").after('<button type="button" class="btn btn-default" style="margin-left:10px;" onclick="ExportarPDF('+n.idCV+')">PDF<\/button>');ReloadTable("TablaCV")}),!1}function EditarDatos(){return SaveDatos(function(){ReloadTable("TablaCV")}),!1}function SaveDatos(n){$("#DatosForm").valid()&&$.post("/CV/GuardarDatos/",$("#DatosForm").serialize()).success(function(t){t.IsEverythingGood?n&&n(t):t.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmModal)})}function AbrirExperienciaModal(){CargarContenidoModalCV("Experiencia")}function IniciarTablaExperiencia(){$.fn.dataTable.ext.errMode="none";$("#TablaExperiencia").on("error.dt",function(){CargarAlertas(frmModal)});var n=$("#TablaExperiencia").dataTable({dom:"lfrtip",columnDefs:[{type:"fecha",targets:0}],sAjaxSource:"/CV/LlenarJSONGrillaExperiencia",sServerMethod:"POST",aoColumns:[{data:null,sWidth:"30%",mRender:function(n,t,i){var r=i.date_from.substr(0,10)+" - ";return r+(i.date_to!=null?i.date_to.substr(0,10):"")}},{data:"company",sWidth:"30%"},{data:"charge",sWidth:"30%"},{data:"id",sWidth:"10%",sClass:"der",orderable:!1,sWidth:"10%",render:function(n,t,i){return BotoneraGrillaExperiencia(i)}}],bAutoWidth:!1,pageLength:50,language:{select:{rows:". %d filas seleccionadas"}},fnDrawCallback:function(){FuncionesBotoneraGrillaExperiencia()},fnServerParams:function(n){n.push({name:"idCV",value:$("#experiencia_cv_id").val()})}})}function BotoneraGrillaExperiencia(n){return""+('        <button type="button" class="editDialogModal btn btn-default btn-xs" data-clientid="'+n.id+'" title="Editar">             <span class="glyphicon glyphicon-edit" aria-hidden="true"><\/span>         <\/button>')}function FuncionesBotoneraGrillaExperiencia(){$(".editDialogModal").off().on("click",function(){$("#btnCancelarEdicion").removeClass("hidden");PopularExperiencia($(this).data("clientid"))})}function GuardarExperiencia(){$("#ExperienciaForm").valid()&&$.post("/CV/GuardarExperiencia/",$("#ExperienciaForm").serialize()).success(function(n){n.IsEverythingGood?(ReloadTable("TablaExperiencia",!1),LimpiarFormExperiencia()):n.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmModal)})}function LimpiarFormExperiencia(){$("#modo").val("ALTA");$("#experiencia_id").val(0);$("#experiencia_company").val("");$("#experiencia_charge").val("");$("#experiencia_location").val("");$("#experiencia_description").val("");$("#experiencia_date_from").val("");$("#experiencia_date_to").val("");$("#btnCancelarEdicion").addClass("hidden")}function PopularExperiencia(n){$("#panelFormExperiencia").hasClass("shown")||SlideDesplegable("panelFormExperiencia");$.get("/CV/GetExperienciaByID/",{idExperiencia:n}).done(function(n){if(n.IsEverythingGood)$("#modo").val("EDICION"),$("#experiencia_id").val(n.Experiencia.id),$("#experiencia_cv_id").val(n.Experiencia.cv_id),$("#experiencia_company").val(n.Experiencia.company),$("#experiencia_charge").val(n.Experiencia.charge),$("#experiencia_location").val(n.Experiencia.location),$("#experiencia_description").val(n.Experiencia.description),$("#experiencia_date_from").val(n.Experiencia.date_from.substr(0,10)),$("#experiencia_date_to").val(n.Experiencia.date_to.substr(0,10));else return CargarAlertas(frmModal),null}).fail(function(){return CargarAlertas(frmModal),null})}function AbrirEducacionModal(){CargarContenidoModalCV("Educacion")}function IniciarTablaEducacion(){$.fn.dataTable.ext.errMode="none";$("#TablaEducacion").on("error.dt",function(){CargarAlertas(frmModal)});var n=$("#TablaEducacion").dataTable({dom:"lfrtip",columnDefs:[{type:"fecha",targets:0}],sAjaxSource:"/CV/LlenarJSONGrillaEducacion",sServerMethod:"POST",aoColumns:[{data:null,sWidth:"30%",mRender:function(n,t,i){var r=i.entry_date.substr(0,10)+" - ";return r+(i.end_date!=null?i.end_date.substr(0,10):"")}},{data:"institute",sWidth:"30%"},{data:"title",sWidth:"30%"},{data:"id",sWidth:"10%",sClass:"der",orderable:!1,sWidth:"10%",render:function(n,t,i){return BotoneraGrillaEducacion(i)}}],bAutoWidth:!1,pageLength:50,language:{select:{rows:". %d filas seleccionadas"}},fnDrawCallback:function(){FuncionesBotoneraGrillaEducacion()},fnServerParams:function(n){n.push({name:"idCV",value:$("#educacion_cv_id").val()})}})}function BotoneraGrillaEducacion(n){return""+('        <button type="button" class="editDialogModal btn btn-default btn-xs" data-clientid="'+n.id+'" title="Editar">             <span class="glyphicon glyphicon-edit" aria-hidden="true"><\/span>         <\/button>')}function FuncionesBotoneraGrillaEducacion(){$(".editDialogModal").off().on("click",function(){$("#btnCancelarEdicion").removeClass("hidden");PopularEducacion($(this).data("clientid"))})}function GuardarEducacion(){$("#EducacionForm").valid()&&$.post("/CV/GuardarEducacion/",$("#EducacionForm").serialize()).success(function(n){n.IsEverythingGood?(ReloadTable("TablaEducacion",!1),LimpiarFormEducacion()):n.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmModal)})}function LimpiarFormEducacion(){$("#modo").val("ALTA");$("#educacion_id").val(0);$("#educacion_institute").val("");$("#educacion_title").val("");$("#educacion_comments").val("");$("#educacion_entry_date").val("");$("#educacion_end_date").val("");$("#btnCancelarEdicion").addClass("hidden")}function PopularEducacion(n){$("#panelFormEducacion").hasClass("shown")||SlideDesplegable("panelFormEducacion");$.get("/CV/GetEducacionByID/",{idEducacion:n}).done(function(n){n.IsEverythingGood?($("#modo").val("EDICION"),$("#educacion_id").val(n.Educacion.id),$("#educacion_cv_id").val(n.Educacion.cv_id),$("#educacion_institute").val(n.Educacion.institute),$("#educacion_title").val(n.Educacion.title),$("#educacion_comments").val(n.Educacion.comments),$("#educacion_entry_date").val(n.Educacion.entry_date.substr(0,10)),$("#educacion_end_date").val(n.Educacion.end_date.substr(0,10))):CargarAlertas(frmModal)}).fail(function(){CargarAlertas(frmModal)})}function AbrirEntrevistaModal(){CargarContenidoModalCV("Entrevista")}function IniciarTablaEntrevista(){$.fn.dataTable.ext.errMode="none";$("#TablaEntrevista").on("error.dt",function(){CargarAlertas(frmModal)});var n=$("#TablaEntrevista").dataTable({dom:"lfrtip",columnDefs:[{type:"fecha",targets:0}],sAjaxSource:"/CV/LlenarJSONGrillaEntrevista",sServerMethod:"POST",aoColumns:[{data:"date",sWidth:"90%",mRender:function(n){return n.substr(0,10)}},{data:"id",sWidth:"10%",sClass:"der",orderable:!1,sWidth:"10%",render:function(n,t,i){return BotoneraGrillaEntrevista(i)}}],bAutoWidth:!1,pageLength:50,language:{select:{rows:". %d filas seleccionadas"}},fnDrawCallback:function(){FuncionesBotoneraGrillaEntrevista()},fnServerParams:function(n){n.push({name:"idCV",value:$("#entrevista_cv_id").val()})}})}function BotoneraGrillaEntrevista(n){return""+('        <button type="button" class="editDialogModal btn btn-default btn-xs" data-clientid="'+n.id+'" title="Editar">             <span class="glyphicon glyphicon-edit" aria-hidden="true"><\/span>         <\/button>')}function FuncionesBotoneraGrillaEntrevista(){$(".editDialogModal").off().on("click",function(){$("#btnCancelarEdicion").removeClass("hidden");PopularEntrevista($(this).data("clientid"))})}function GuardarEntrevista(){$("#EntrevistaForm").valid()&&$.post("/CV/GuardarEntrevista/",$("#EntrevistaForm").serialize()).success(function(n){n.IsEverythingGood?(ReloadTable("TablaEntrevista",!1),LimpiarFormEntrevista()):n.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmModal)})}function LimpiarFormEntrevista(){$("#modo").val("ALTA");$("#entrevista_id").val(0);$("#entrevista_comments").val("");$("#entrevista_date").val("");$("#btnCancelarEdicion").addClass("hidden")}function PopularEntrevista(n){$("#panelFormEntrevista").hasClass("shown")||SlideDesplegable("panelFormEntrevista");$.get("/CV/GetEntrevistaByID/",{idEntrevista:n}).done(function(n){n.IsEverythingGood?($("#modo").val("EDICION"),$("#entrevista_id").val(n.entrevista.id),$("#entrevista_cv_id").val(n.entrevista.cv_id),$("#entrevista_comments").val(n.entrevista.comments),$("#entrevista_date").val(n.entrevista.date.substr(0,10))):CargarAlertas(frmModal)}).fail(function(){CargarAlertas(frmModal)})}