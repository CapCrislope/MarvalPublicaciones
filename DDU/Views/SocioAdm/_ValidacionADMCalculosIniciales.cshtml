
@model DistribucionUtilidades.Models.VM.ValidacionADMCalculosInicialesVM
@using System.Globalization;

@{ }


<div id="Alerts_ValidacionADMCalculosIniciales"></div>

<div class="row mb-3">
    <div class="col-md-12">
        @{
            if (ViewBag.TipoProceso == 1)
            {
                <h3>Validación cálculos iniciales (Proceso Real)</h3>
            }
            else
            {
                <h3 style="color:#ff6a00">Validación cálculos iniciales (Proceso Provisorio)</h3>
            }
        }
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <p class="leyenda">Verifique si los datos del cuadro son correctos. Por favor, preste especial atención a las líneas en color ya que esos datos fueron modificados manualmente por el usuario de finanzas.<br />En caso de que algún dato sea incorrecto, puede rechazarlo para que sea corregido.</p>
    </div>
</div>

    <div class="row mt-3">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <table id="ImportesSocioTable" class="table">
                <thead class="thead-dark">
                    <tr>
                        <th width="20%" scope="col">Socio/Ex-Socio</th>
                        <th width="15%" scope="col">Importe</th>
                        <th width="10%" scope="col">Retiros</th>
                        <th width="10%" scope="col">Bonos</th>
                        <th width="10%" scope="col">Impuestos</th>
                        <th width="10%" scope="col">Retenciones</th>
                        <th width="15%" scope="col">Ajus. Ej. Anterior</th>
                        <th width="15%">Saldo Inicial</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        if (Model.Socios.Count > 0)
                        {
                            for (int i = 0; i < Model.Socios.Count; i++)
                            {

                                <tr id="@Model.Socios[i].PersonaId" data-type="Socio" data-row="@i" class="@(Model.Socios[i].Editado == true ? "bg-edited" : "" )">
                                    <td>@Model.Socios[i].Socio</td>
                                    <td>
                                        <div id="Importe_@Model.Socios[i].PersonaId">
                                            $ @Model.Socios[i].Importe.ToString("N0")
                                            @*@Html.TextBoxFor(model => Model.Socios[i].Importe, new { htmlAttributes = new { @class = "form-control form-control-sm", @type = "number", @min = "0", @Id = "Importe_" + Model.Socios[i].PersonaId + "" } })
                                                @Html.ValidationMessageFor(model => Model.Socios[i].Importe)*@
                                        </div>

                                    </td>

                                    <td>
                                        <div id="ImporteRetiro_@Model.Socios[i].PersonaId">
                                            $ @Model.Socios[i].Retiro.ToString("N0")
                                        </div>
                                    </td>

                                    <td>
                                        <div id="ImporteBono_@Model.Socios[i].PersonaId">
                                            $ @Model.Socios[i].Bono.ToString("N0")
                                        </div>
                                    </td>

                                    <td>
                                        <div id="ImporteImpuestos_@Model.Socios[i].PersonaId" data-base="@Model.Socios[i].Impuestos" data-modif="">
                                            $ @Model.Socios[i].Impuestos.ToString("N0")
                                        </div>

                                    </td>

                                    <td>
                                        <div id="ImporteRetenciones_@Model.Socios[i].PersonaId" data-base="@{@Model.Socios[i].Retenciones}" data-modif="">
                                            $ @Model.Socios[i].Retenciones.ToString("N0")
                                        </div>

                                    </td>

                                    <td>
                                        <div id="ImporteAjusteEjercicioAnterior_@Model.Socios[i].PersonaId">
                                            $ @Model.Socios[i].AjusteEjercicioAnterior.ToString("N0")
                                        </div>

                                    </td>
                                    <td>
                                        <div id="ImporteSaldoInicial_@Model.Socios[i].PersonaId" data-val="@Model.Socios[i].SaldoInicial">
                                            $ @Model.Socios[i].SaldoInicial.ToString("N0")
                                        </div>

                                    </td>
                                </tr>
                            }
                        }

                        <tr id="totalSocios" class="bg-total">
                            <td>Total socios</td>
                            <td>
                                <div id="Importe_AjusteEjercicioAnterior">
                                    $ @Model.TotalSocios.ToString("N0")
                                </div>
                            </td>
                            <td>

                                <div id="Importe_TotalRetirosSocios">
                                    $ @Model.TotalRetirosSocios.ToString("N0")
                                </div>

                            </td>

                            <td>
                                <div id="Importe_TotalBonosSocios">
                                    $ @Model.TotalBonosSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="Importe_TotalImpuestosSocios">
                                    $ @Model.TotalImpuestosSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="Importe_TotalRetencionesSocios">
                                    $ @Model.TotalRetencionesSocios.ToString("N0")
                                </div>

                            </td>

                            <td>
                                <div id="Importe_TotalAjustesEJAnteriorSocios">
                                    $ @Model.TotalAjustesEJAnteriorSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="Importe_TotalSaldoInicialSocios">
                                    $ @Model.TotalSaldoInicialSocios.ToString("N0")
                                </div>
                            </td>

                        </tr>
                            //--------------------------------------------------------------------------------
                            if (Model.ExSocios.Count > 0)
                            {

                                for (int i = 0; i < Model.ExSocios.Count; i++)
                                {

                                <tr id="@Model.ExSocios[i].PersonaId" data-type="ExSocio" data-row="@i" class="@(Model.ExSocios[i].Editado == true ? "bg-edited" : "" )">
                                    <td>@Model.ExSocios[i].Socio</td>
                                    <td>
                                        <div>
                                            $ @Model.ExSocios[i].Importe.ToString("N0")
                                        </div>

                                    </td>

                                    <td>
                                        <div id="ImporteRetiroSocio_@Model.ExSocios[i].PersonaId">
                                            $ @Model.ExSocios[i].Retiro.ToString("N0")
                                        </div>
                                    </td>

                                    <td>
                                        <div id="ImporteBonoSocio_@Model.ExSocios[i].PersonaId">
                                            $ @Model.ExSocios[i].Bono.ToString("N0")
                                        </div>
                                    </td>

                                    <td>
                                        <div id="ImporteImpuestosSocio_@Model.ExSocios[i].PersonaId" data-val="@Model.ExSocios[i].Impuestos">
                                            $ @Model.ExSocios[i].Impuestos.ToString("N0")
                                        </div>
                                    </td>

                                    <td>
                                        <div id="ImporteRetencionesSocio_@Model.ExSocios[i].PersonaId" data-val="@Model.ExSocios[i].Retenciones">
                                            $ @Model.ExSocios[i].Retenciones.ToString("N0")
                                        </div>
                                    </td>

                                    <td>
                                        <div id="ImporteAjusteEjercicioAnteriorSocio_@Model.ExSocios[i].PersonaId">
                                            $ @Model.ExSocios[i].AjusteEjercicioAnterior.ToString("N0")
                                        </div>
                                    </td>

                                    <td>
                                        <div id="ImporteSaldoInicialSocio_@Model.ExSocios[i].PersonaId" data-val="@Model.ExSocios[i].SaldoInicial">
                                            $ @Model.ExSocios[i].SaldoInicial.ToString("N0")
                                        </div>
                                    </td>

                                </tr>
                            }


                        }
                        <tr id="totalExSocios" class="bg-total">
                            <td>Total ExSocios</td>
                            <td>
                                <div id="ImporteTotal_ExSocio">
                                    $ @Model.TotalExSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="Importe_TotalRetirosExSocios">
                                    $ @Model.TotalRetirosExSocios.ToString("N0")
                                </div>
                            </td>

                            <td>

                                <div id="Importe_TotalBonosExSocios">
                                    $ @Model.TotalBonosExSocios.ToString("N0")
                                </div>

                            </td>

                            <td>
                                <div id="Importe_TotalImpuestosExSocios">
                                    $ @Model.TotalImpuestosExSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="Importe_TotalRetencionesExSocios">
                                    $ @Model.TotalRetencionesExSocios.ToString("N0")
                                </div>

                            </td>

                            <td>
                                <div id="Importe_TotalAjustesEJAnteriorExSocios">
                                    $ @Model.TotalAjustesEJAnteriorExSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="Importe_TotalSaldoInicialExSocios">
                                    $ @Model.TotalSaldoInicialExSocios.ToString("N0")
                                </div>
                            </td>
                        </tr>
                        <tr class="bg-totalGeneral">
                            <td>TOTAL</td>
                            <td>
                                <div id="ImporteSumaTotal_ExSocio">
                                    $ @Model.SumaTotalSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSumaTotalRetirosExSocios">
                                    $ @Model.SumaTotalRetiros.ToString("N0")
                                </div>
                            </td>

                            <td>

                                <div id="ImporteSumaTotalBonosExSocios">
                                    $ @Model.SumaTotalBonos.ToString("N0")
                                </div>

                            </td>

                            <td>
                                <div id="ImporteSumaTotalImpuestosExSocios">
                                    $ @Model.SumaTotalImpuestos.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSumaTotalRetencionesExSocios">
                                    $ @Model.SumaTotalRetenciones.ToString("N0")
                                </div>

                            </td>

                            <td>
                                <div id="ImporteSumaTotalAjustesEJAnteriorExSocios">
                                    $ @Model.SumaTotalAjustesEJAnterior.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSumaTotalSaldoInicialExSocios">
                                    $ @Model.SumaTotalSaldoInicial.ToString("N0")
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="col-md-1"></div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="text-center">
                <button type="button" class="btn btn-success btn-sm pl-3 pr-3 mt-5" onclick="AprobarCalculosIniciales();">Aprobar</button>
                <button type="button" class="btn btn-danger btn-sm pl-3 pr-3 mt-5" onclick="ModalRechazarCalculosIniciales();">Rechazar</button>
            </div>

        </div>
    </div>


<partial name="_ValidationScriptsPartial" />

<environment include="Development">
    <script src="~/js/ValidacionADMCalculosIniciales.js" asp-append-version="true"></script>
</environment>
<environment exclude="Development">
    <script src="~/js/ValidacionADMCalculosIniciales.min.js" asp-append-version="true"></script>
</environment>

<script type="text/javascript">

    $(document).ready(function () {


    })

</script>
