function GetDataGrillaSocio(n){return{IdSocio:n,Type:$("#"+n).attr("data-type"),ImporteGanancias:$("#ImporteGanancias_"+n).attr("data-val"),ImporteBienesPersonales:$("#ImporteBienesPersonales_"+n).attr("data-val"),ImporteSaldoDDJJBienes:$("#ImporteSaldoDDJJBienes_"+n).attr("data-val"),ImporteSaldoDDJJGanancias:$("#ImporteSaldoDDJJGanancias_"+n).attr("data-val"),ImporteSaldoDDJJCedular:$("#ImporteSaldoDDJJCedular_"+n).attr("data-val"),ImporteImpuestoCedular:$("#ImporteImpuestoCedular_"+n).attr("data-val")}}function ModalEdicionImpuestos(n){$("#dialog").load("/Independiente/ModalEdicionImpuestosSocio",{Data:GetDataGrillaSocio(n)},function(n,t){t=="success"?$("#dialog").modal("show"):CargarAlertas(frmHome)})}function GuardarEdicionImpuestos(){var n=$("#FormEdicionImpuestosRetenciones").serializeArray();$("#FormEdicionImpuestosRetenciones").valid()&&EditarCamposGrilla(n,CalculoTotales)}function EditarCamposGrilla(n,t){var i=n[0].value,c=n[1].value,r=parseInt(n[2].value),u=parseInt(n[3].value),f=parseInt(n[4].value),e=parseInt(n[5].value),o=parseInt(n[6].value),s=parseInt(n[7].value),h=r+u+f+e+o+s;$("#ImporteGanancias_"+i).text("$ "+r.toLocaleString());$("#ImporteGanancias_"+i).attr("data-val",r);$("#ImporteBienesPersonales_"+i).text("$ "+u.toLocaleString());$("#ImporteBienesPersonales_"+i).attr("data-val",u);$("#ImporteSaldoDDJJBienes_"+i).text("$ "+f.toLocaleString());$("#ImporteSaldoDDJJBienes_"+i).attr("data-val",f);$("#ImporteSaldoDDJJGanancias_"+i).text("$ "+e.toLocaleString());$("#ImporteSaldoDDJJGanancias_"+i).attr("data-val",e);$("#ImporteSaldoDDJJCedular_"+i).text("$ "+o.toLocaleString());$("#ImporteSaldoDDJJCedular_"+i).attr("data-val",o);$("#ImporteImpuestoCedular_"+i).text("$ "+s.toLocaleString());$("#ImporteImpuestoCedular_"+i).attr("data-val",s);$("#ImporteTotal_"+i).text("$ "+h.toLocaleString());$("#ImporteTotal_"+i).attr("data-val",h);t(c,CalcularSumaTotales)}function CalculoTotales(n,t){var i=0,r=0,u=0,f=0,e=0,o=0,s=0;$("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"'] ").find("div[id^='ImporteGanancias_']").each(function(n,t){i=parseInt($("#"+t.id).attr("data-val"))+i});$("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"'] ").find("div[id^='ImporteBienesPersonales_']").each(function(n,t){r=parseInt($("#"+t.id).attr("data-val"))+r});$("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"'] ").find("div[id^='ImporteSaldoDDJJBienes_']").each(function(n,t){u=parseInt($("#"+t.id).attr("data-val"))+u});$("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"'] ").find("div[id^='ImporteSaldoDDJJGanancias_']").each(function(n,t){f=parseInt($("#"+t.id).attr("data-val"))+f});$("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"'] ").find("div[id^='ImporteSaldoDDJJCedular_']").each(function(n,t){e=parseInt($("#"+t.id).attr("data-val"))+e});$("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"'] ").find("div[id^='ImporteImpuestoCedular_']").each(function(n,t){o=parseInt($("#"+t.id).attr("data-val"))+o});$("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"'] ").find("div[id^='ImporteTotal_']").each(function(n,t){s=parseInt($("#"+t.id).attr("data-val"))+s});n=="Socio"?($("#Importe_TotalAnticiposImpuestosGananciasSocios").attr("data-val",i),$("#Importe_TotalAnticiposImpuestosGananciasSocios").text("$ "+i.toLocaleString()),$("#Importe_TotalAnticiposBienesPersonalesSocios").attr("data-val",r),$("#Importe_TotalAnticiposBienesPersonalesSocios").text("$ "+r.toLocaleString()),$("#Importe_TotalSaldoDDJJBienesPersonalesSocios").attr("data-val",u),$("#Importe_TotalSaldoDDJJBienesPersonalesSocios").text("$ "+u.toLocaleString()),$("#Importe_TotalSaldoDDJJGananciasSocios").attr("data-val",f),$("#Importe_TotalSaldoDDJJGananciasSocios").text("$ "+f.toLocaleString()),$("#Importe_TotalSaldoDDJJImpuestoCedularSocios").attr("data-val",e),$("#Importe_TotalSaldoDDJJImpuestoCedularSocios").text("$ "+e.toLocaleString()),$("#Importe_TotalImpuestoCedularSocios").attr("data-val",o),$("#Importe_TotalImpuestoCedularSocios").text("$ "+o.toLocaleString()),$("#Importe_TotalSocios").attr("data-val",s),$("#Importe_TotalSocios").text("$ "+s.toLocaleString())):($("#Importe_TotalAnticiposImpuestosGananciasExSocios").attr("data-val",i),$("#Importe_TotalAnticiposImpuestosGananciasExSocios").text("$ "+i.toLocaleString()),$("#Importe_TotalAnticiposBienesPersonalesExSocios").attr("data-val",r),$("#Importe_TotalAnticiposBienesPersonalesExSocios").text("$ "+r.toLocaleString()),$("#Importe_TotalSaldoDDJJBienesPersonalesExSocios").attr("data-val",u),$("#Importe_TotalSaldoDDJJBienesPersonalesExSocios").text("$ "+u.toLocaleString()),$("#Importe_TotalSaldoDDJJGananciasExSocios").attr("data-val",f),$("#Importe_TotalSaldoDDJJGananciasExSocios").text("$ "+f.toLocaleString()),$("#Importe_TotalSaldoDDJJImpuestoCedularExSocios").attr("data-val",e),$("#Importe_TotalSaldoDDJJImpuestoCedularExSocios").text("$ "+e.toLocaleString()),$("#Importe_TotalImpuestoCedularExSocios").attr("data-val",o),$("#Importe_TotalImpuestoCedularExSocios").text("$ "+o.toLocaleString()),$("#Importe_TotalExSocios").attr("data-val",s),$("#Importe_TotalExSocios").text("$ "+s.toLocaleString()));t()}function CalcularSumaTotales(){var n=parseInt($("#Importe_TotalAnticiposImpuestosGananciasSocios").attr("data-val"))+parseInt($("#Importe_TotalAnticiposImpuestosGananciasExSocios").attr("data-val")),t=parseInt($("#Importe_TotalAnticiposBienesPersonalesSocios").attr("data-val"))+parseInt($("#Importe_TotalAnticiposBienesPersonalesExSocios").attr("data-val")),i=parseInt($("#Importe_TotalSaldoDDJJBienesPersonalesSocios").attr("data-val"))+parseInt($("#Importe_TotalSaldoDDJJBienesPersonalesExSocios").attr("data-val")),r=parseInt($("#Importe_TotalSaldoDDJJGananciasSocios").attr("data-val"))+parseInt($("#Importe_TotalSaldoDDJJGananciasExSocios").attr("data-val")),u=parseInt($("#Importe_TotalSaldoDDJJImpuestoCedularSocios").attr("data-val"))+parseInt($("#Importe_TotalSaldoDDJJImpuestoCedularExSocios").attr("data-val")),f=parseInt($("#Importe_TotalImpuestoCedularSocios").attr("data-val"))+parseInt($("#Importe_TotalImpuestoCedularExSocios").attr("data-val")),e=parseInt($("#Importe_TotalSocios").attr("data-val"))+parseInt($("#Importe_TotalExSocios").attr("data-val"));$("#SumaTotalAnticiposImpuestosGanancias").text("$ "+n.toLocaleString());$("#SumaTotalAnticiposBienesPersonales").text("$ "+t.toLocaleString());$("#SumaTotalSaldoDDJJBienesPersonales").text("$ "+i.toLocaleString());$("#SumaTotalSaldoDDJJGanancias").text("$ "+r.toLocaleString());$("#SumaTotalSaldoDDJJImpuestoCedular").text("$ "+u.toLocaleString());$("#SumaTotalImpuestoCedular").text("$ "+f.toLocaleString());$("#ImporteSumaTotal").text("$ "+e.toLocaleString());$("#dialog").modal("hide");Success("Se modific√≥ correctamente los valores de Impuestos del Socio/ExSocio: ")}function ObjPersona(){return{IdPersona:null,ImporteGanancias:null,ImporteBienesPersonales:null,ImporteSaldoDDJJBienes:null,ImporteSaldoDDJJGanancias:null,ImporteSaldoDDJJCedular:null,ImporteImpuestoCedular:null,Total:null}}function GetDataSociosExSocios(n){var t=[];return $("#ImpuestosEstimadosBorradorTable tbody tr[data-type='"+n+"']").each(function(n,i){var r=ObjPersona();r.IdPersona=i.id;r.ImporteGanancias=$("#ImporteGanancias_"+i.id).attr("data-val");r.ImporteBienesPersonales=$("#ImporteBienesPersonales_"+i.id).attr("data-val");r.ImporteSaldoDDJJBienes=$("#ImporteSaldoDDJJBienes_"+i.id).attr("data-val");r.ImporteSaldoDDJJGanancias=$("#ImporteSaldoDDJJGanancias_"+i.id).attr("data-val");r.ImporteSaldoDDJJCedular=$("#ImporteSaldoDDJJCedular_"+i.id).attr("data-val");r.ImporteImpuestoCedular=$("#ImporteImpuestoCedular_"+i.id).attr("data-val");r.Total=$("#ImporteTotal_"+i.id).attr("data-val");t.push(r)}),t}function GuardarBorradorImpuestosEstimados(){var n={Socios:GetDataSociosExSocios("Socio"),ExSocios:GetDataSociosExSocios("ExSocio")};$.post("/Independiente/GuardarBorradorImpuestos",{Data:n}).done(function(n){n.isEverythingGood==!0&&(CargarMenu(),CargarEstadoProceso())}).always(function(){CargarAlertas(frmHome)})}function CargarTabla(n){$("#ImpuestosEstimadosBorradorTable tbody").load("/Independiente/CargarDataTablaBorradorImpuestos",{data:n},function(n,t){t=="success"})}function ValidarDatosExcelBorradorImpuestos(){if($("#btnCargarExcel").prop("disabled",!0),$("#excelFile")[0].files[0]!=null){var n=new FormData;n.append("file",$("#excelFile")[0].files[0]);$.ajax({type:"POST",url:"/Independiente/ValidarDatosExcelBorradorImpuestos",data:n,cache:!1,contentType:!1,processData:!1,success:function(n){CargarAlertas(frmHome);n.isEverythingGood&&(CargarTabla(n.lista),$("#btnGuardarBorrador").prop("disabled",!1))},error:function(){CargarAlertas(frmHome)},complete:function(){$(".custom-file-label").html("Seleccionar Archivo");$("#btnCargarExcel").prop("disabled",!1)}})}else Danger("Debe cargar un archivo."),$("#btnCargarExcel").prop("disabled",!1)}