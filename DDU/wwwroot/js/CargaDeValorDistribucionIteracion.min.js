function disableInput(n){var t=$(n).attr("id");t=="tipo_Pesos"?($("#ImporteDistribucionSociosDolares").prop("disabled",!0),$("#ImporteDistribucionSociosDolares").val(""),$("#ImporteDistribucionSociosDolares").blur(),$("#ImporteDistribucionExSociosDolares").val(""),$("#ImporteDistribucionExSociosDolares").blur(),$("#ImporteDistribucionSociosPesos").prop("disabled",!1),VaciarDistribucionDolares()):$("#ImporteDistribucionSociosDolares").prop("disabled",!1)}function conversionPesosADolar(){var n=Math.round($("#ImporteDistribucionSociosPesos").val()/parseFloat($("#TipoCambio").val()));$("#ImporteDistribucionSociosDolares").val(n);$("#ImporteDistribucionSociosDolares").blur()}function conversionDolarAPesos(){var n=$("#ImporteDistribucionSociosDolares").val()*parseFloat($("#TipoCambio").val());$("#ImporteDistribucionSociosPesos").val(n);$("#ImporteDistribucionSociosPesos").blur()}function checkInputTipoCambio(){$("[name='TipoDistribucionPesos']:checked").val()=="True"?$("#ImporteDistribucionSociosPesos").val()!="0"&&$("#ImporteDistribucionSociosPesos").val()!=""?calcularImporteTotalSociosYExSocios():Danger("Para realizar el calculo,debe ingresar un valor en Importe total en $ a Distribuir a Socios"):($("#ImporteDistribucionSociosPesos").val()=="0"||$("#ImporteDistribucionSociosPesos").val()=="")&&($("#ImporteDistribucionSociosDolares").val()=="0"||$("#ImporteDistribucionSociosDolares").val()=="")?Danger("Debe ingresar un monto en alguno de los campos para realizar la conversión."):$("#ImporteDistribucionSociosPesos").val()!="0"&&$("#ImporteDistribucionSociosPesos").val()!=""&&$("#ImporteDistribucionSociosDolares").val()!="0"&&$("#ImporteDistribucionSociosDolares").val()!=""?Danger("Solo un valor debe estar cargado. Por favor corrobore los campos."):($("#ImporteDistribucionSociosPesos").val()!="0"&&$("#ImporteDistribucionSociosPesos").val()!=""?conversionPesosADolar():conversionDolarAPesos(),calcularImporteTotalSociosYExSocios())}function calcular(){checkInputTipoCambio()}function calcularImporteTotalSociosYExSocios(){var t;var i=$("#TotalPorcentajeExSocios").attr("data-val").replace(",","."),r=$("#TotalPorcentajeSocios").attr("data-val").replace(",","."),u=$("#ImporteDistribucionSociosPesos").val(),n=parseFloat(i)*parseInt(u)/parseFloat(r);n=Math.round(n);$("#ImporteDistribucionExSociosPesos").val(n);$("#ImporteDistribucionExSociosPesos").blur();$("[name='TipoDistribucionPesos']:checked").val()=="False"&&(t=n/parseFloat($("#TipoCambio").val().replace(",",".")),t=Math.round(t),$("#ImporteDistribucionExSociosDolares").val(t),$("#ImporteDistribucionExSociosDolares").blur());calcularDistribucionSocioYExSocio()}function calcularDistribucionSocioYExSocio(){var n=GetDataTable("Socio"),t=GetDataTable("ExSocio");$("[name='TipoDistribucionPesos']:checked").val()=="True"?(calculoDistribucionPesos(n,t,null),$("[id^='ImporteDistribucionTotalDolares_'").attr("data-val",0)):calculoDistribucionPesos(n,t,calculoDistribucionDolares)}function calculoDistribucionPesos(n,t,i){var f;var r=parseInt($("#ImporteDistribucionSociosPesos").val()),u=parseInt($("#ImporteDistribucionExSociosPesos").val()),e=parseFloat($("#TotalPorcentajeSocios").attr("data-val").replace(",",".")),o=parseFloat($("#TotalPorcentajeExSocios").attr("data-val").replace(",","."));$(n).each(function(n,t){var i=Math.round(r*parseFloat(t.porcentaje.replace(",","."))/e);$("#ImporteDistribucionTotalPesos_"+t.idPersona).attr("data-val",i);$("#ImporteDistribucionTotalPesos_"+t.idPersona).text("$ "+i.toLocaleString())});$(t).each(function(n,t){var i=Math.round(u*parseFloat(t.porcentaje.replace(",","."))/o);$("#ImporteDistribucionTotalPesos_"+t.idPersona).attr("data-val",i);$("#ImporteDistribucionTotalPesos_"+t.idPersona).text("$ "+i.toLocaleString())});$("#TotalDistribucionPesosSocios").attr("data-val",r);$("#TotalDistribucionPesosSocios").text("$ "+r.toLocaleString());$("#TotalDistribucionPesosExSocios").attr("data-val",u);$("#TotalDistribucionPesosExSocios").text("$ "+u.toLocaleString());f=parseInt($("#TotalDistribucionPesosExSocios").attr("data-val"))+parseInt($("#TotalDistribucionPesosSocios").attr("data-val"));$("#SumaTotalDistribucionesPesos").text("$ "+f.toLocaleString());i!=null&&i(n,t)}function calculoDistribucionDolares(n,t){var u;var i=parseInt($("#ImporteDistribucionSociosDolares").val()),r=parseInt($("#ImporteDistribucionExSociosDolares").val()),f=parseFloat($("#TotalPorcentajeSocios").attr("data-val").replace(",",".")),e=parseFloat($("#TotalPorcentajeExSocios").attr("data-val").replace(",","."));$(n).each(function(n,t){var r=Math.round(i*parseFloat(t.porcentaje.replace(",","."))/f);$("#ImporteDistribucionTotalDolares_"+t.idPersona).attr("data-val",r);$("#ImporteDistribucionTotalDolares_"+t.idPersona).text("U$D "+r.toLocaleString())});$(t).each(function(n,t){var i=Math.round(r*parseFloat(t.porcentaje.replace(",","."))/e);$("#ImporteDistribucionTotalDolares_"+t.idPersona).attr("data-val",i);$("#ImporteDistribucionTotalDolares_"+t.idPersona).text("U$D "+i.toLocaleString())});$("#TotalDistribucionDolaresSocios").attr("data-val",i);$("#TotalDistribucionDolaresSocios").text("U$D "+i.toLocaleString());$("#TotalDistribucionDolaresExSocios").attr("data-val",r);$("#TotalDistribucionDolaresExSocios").text("U$D "+r.toLocaleString());u=parseInt($("#TotalDistribucionDolaresExSocios").attr("data-val"))+parseInt($("#TotalDistribucionDolaresSocios").attr("data-val"));$("#SumaTotalDistribucionesDolares").text("U$D "+u.toLocaleString())}function VaciarDistribucionDolares(){$("[id^='ImporteDistribucionTotalDolares_'").attr("data-val",0);$("[id^='ImporteDistribucionTotalDolares_'").text("U$D 0");$("#TotalDistribucionDolaresSocios").attr("data-val",0);$("#TotalDistribucionDolaresSocios").text("U$D 0");$("#TotalDistribucionDolaresExSocios").attr("data-val",0);$("#TotalDistribucionDolaresExSocios").text("U$D 0");$("#SumaTotalDistribucionesDolares").text("U$D 0")}function ObjPersona(){return{idPersona:null,porcentaje:null}}function GetDataTable(n){var t=[];return $("#CargaValorDistribucionIteracionTable tbody tr[data-type='"+n+"']").each(function(n,i){var r=ObjPersona(),u=i.id,f=$("#DistribucionPorcentaje_"+i.id).attr("data-val");r.idPersona=u;r.porcentaje=f;t.push(r)}),t}function ObjPersonaDistribucion(){return{IdPersona:null,Porcentaje:null,ImportePesos:null,ImporteDolares:null}}function GetDataSocioTable(n){var t=[];return $("#CargaValorDistribucionIteracionTable tbody tr[data-type='"+n+"']").each(function(n,i){var r=ObjPersonaDistribucion();r.IdPersona=i.id;r.Porcentaje=$("#DistribucionPorcentaje_"+i.id).attr("data-val");r.ImportePesos=parseInt($("#ImporteDistribucionTotalPesos_"+i.id).attr("data-val"));r.ImporteDolares=parseInt($("#ImporteDistribucionTotalDolares_"+i.id).attr("data-val"));t.push(r)}),t}function guardarDistribucionIteracion(){if(validImportesInputAndImportesTabla()){var n={Modo:$("#Modo").val(),TipoCambio:$("#TipoCambio").val(),Restante:parseInt($("#MontoRestante").attr("data-val")),TipoDistribucionPesos:$("[name='TipoDistribucionPesos']:checked").val()=="True"?!0:!1,ImporteDistribucionSociosDolares:parseInt($("#ImporteDistribucionSociosDolares").val()),ImporteDistribucionSociosPesos:parseInt($("#ImporteDistribucionSociosPesos").val()),ImporteDistribucionExSociosDolares:parseInt($("#ImporteDistribucionExSociosDolares").val()),ImporteDistribucionExSociosPesos:parseInt($("#ImporteDistribucionExSociosPesos").val()),Socios:GetDataSocioTable("Socio"),ExSocios:GetDataSocioTable("ExSocio")};$.post("/Finanzas/GuardarDistribucionIteracion",{vm:n}).done(function(n){n.isEverythingGood==!0&&(CargarMenu(),CargarEstadoProceso())}).always(function(){CargarAlertas(frmHome)})}else Danger("Uno o más valores cambiaron.Por favor realice denuevo el cálculo.")}function validImportesInputAndImportesTabla(){return $("[name='TipoDistribucionPesos']:checked").val()=="True"?$("#ImporteDistribucionSociosPesos").val()==parseInt($("#TotalDistribucionPesosSocios").attr("data-val"))&&$("#ImporteDistribucionExSociosPesos").val()==parseInt($("#TotalDistribucionPesosExSocios").attr("data-val"))?!0:!1:parseInt($("#ImporteDistribucionSociosPesos").val())==parseInt($("#TotalDistribucionPesosSocios").attr("data-val"))&&parseInt($("#ImporteDistribucionExSociosPesos").val())==parseInt($("#TotalDistribucionPesosExSocios").attr("data-val"))&&parseInt($("#ImporteDistribucionSociosDolares").val())==parseInt($("#TotalDistribucionDolaresSocios").attr("data-val"))&&parseInt($("#ImporteDistribucionExSociosDolares").val())==parseInt($("#TotalDistribucionDolaresExSocios").attr("data-val"))?!0:!1}