function CargarComboMes(){new Combo({name:"Mes",view:"_CargaImpuestosReales",actionController:"/Independiente/LlenarComboMesImpuestosRealesCarga",cantItems:1}).createBasicCombo()}function ValidarDatosExcelImpuestosReales(){if($("#btnCargarExcel").prop("disabled",!0),$("#excelFile")[0].files[0]!=null){var n=new FormData;n.append("file",$("#excelFile")[0].files[0]);n.append("Mes",$("#hMes_CargaImpuestosReales").val());$.ajax({type:"POST",url:"/Independiente/ValidarDatosExcelImpuestosReales",data:n,cache:!1,contentType:!1,processData:!1,success:function(n){CargarAlertas(frmHome);n.isEverythingGood&&(drawItemTable(n),$("#btnCargarExcel").prop("disabled",!1),$("#btnGuardarImpuestos").prop("disabled",!1))},error:function(){CargarAlertas(frmHome)},complete:function(){$("#ImpuestosRealesForm")[0].reset();$(".custom-file-label").html("Seleccionar Archivo");$("#btnCargarExcel").prop("disabled",!1)}})}else Danger("Debe cargar un archivo."),$("#btnCargarExcel").prop("disabled",!1)}function drawItemTable(n){$("#ImpuestosRealesTable > tbody").empty();var t="";t+=renderItemsList(n);t+='<tr id="totalExSocios" class="table-info">                            <td>Total ExSocios<\/td>                            <td><div> $ '+n.sumBienesPersonalesExSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumSaldoDDJJBienesExSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumGananciasExSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumSaldoDDJJGananciasExSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumImpuestoCedularExSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumSaldoImpuestoCedularExSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumImportesTotalExSocios.toLocaleString()+"<\/div><\/td>                        <\/tr>";t+='<tr id="total" class="table-info">                            <td>Total<\/td>                            <td><div> $ '+n.sumTotalBienesPersonales.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumTotalSaldoDDJJBienes.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumTotalGanancias.toLocaleString()+"<\/div> <\/td>                            <td><div> $ "+n.sumTotalDDJJGanancias.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumTotalImpuestoCedular.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumTotalSaldoImpuestoCedular.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumTotalImportesTotal.toLocaleString()+"<\/div><\/td>                        <\/tr>";$("#ImpuestosRealesTable tbody").append(t)}function renderItemsList(n){var r,i,t;for(r=!1,i="",t=0;t<n.socios.length;t++)r==n.socios[t].socioEgreso?i+=' <tr id="'+n.socios[t].idPersona+'" data-type="socio">        <td>'+n.socios[t].socio+'<\/td>        <td><div id="BienesPersonales_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].bienesPersonales+'">$ '+n.socios[t].bienesPersonales.toLocaleString()+'<\/div><\/td>        <td><div id="DDJJBienesPersonales_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].saldoDDJJBienes+'">$ '+n.socios[t].saldoDDJJBienes.toLocaleString()+'<\/div><\/td>        <td><div id="ImpuestoGanancia_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].ganancias+'">$ '+n.socios[t].ganancias.toLocaleString()+'<\/div><\/td >        <td><div id="DDJJGanancias_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].saldoDDJJGanancias+'">$ '+n.socios[t].saldoDDJJGanancias.toLocaleString()+'<\/div><\/td>        <td><div id="ImpuestoCedular_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].impuestoCedular+'">$ '+n.socios[t].impuestoCedular.toLocaleString()+'<\/div><\/td>        <td><div id="DDJJImpuestoCedular_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].saldoImpuestoCedular+'">$ '+n.socios[t].saldoImpuestoCedular.toLocaleString()+'<\/div><\/td >        <td><div id="ImporteTotal_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].importeTotal+'">$ '+n.socios[t].importeTotal.toLocaleString()+"<\/div><\/td>        <\/tr>":(i+='<tr id="totalSocios" class="table-info">                            <td>Total Socios<\/td>                            <td><div> $ '+n.sumBienesPersonalesSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumSaldoDDJJBienesSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumGananciasSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumSaldoDDJJGananciasSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumImpuestoCedularSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumSaldoImpuestoCedularSocios.toLocaleString()+"<\/div><\/td>                            <td><div> $ "+n.sumImportesTotalSocios.toLocaleString()+"<\/div><\/td>                        <\/tr>",i+=' <tr id="'+n.socios[t].idPersona+'" data-type="socio">        <td>'+n.socios[t].socio+'<\/td>        <td><div id="BienesPersonales_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].bienesPersonales+'">$ '+n.socios[t].bienesPersonales.toLocaleString()+'<\/div><\/td>        <td><div id="DDJJBienesPersonales_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].saldoDDJJBienes+'">$ '+n.socios[t].saldoDDJJBienes.toLocaleString()+'<\/div><\/td>        <td><div id="ImpuestoGanancia_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].ganancias+'">$ '+n.socios[t].ganancias.toLocaleString()+'<\/div><\/td>        <td><div id="DDJJGanancias_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].saldoDDJJGanancias+'">$ '+n.socios[t].saldoDDJJGanancias.toLocaleString()+'<\/div><\/td>        <td><div id="ImpuestoCedular_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].impuestoCedular+'">$ '+n.socios[t].impuestoCedular.toLocaleString()+'<\/div><\/td>        <td><div id="DDJJImpuestoCedular_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].saldoImpuestoCedular+'">$ '+n.socios[t].saldoImpuestoCedular.toLocaleString()+'<\/div><\/td >        <td><div id="ImporteTotal_'+n.socios[t].idPersona+'" data-value="'+n.socios[t].importeTotal+'">$ '+n.socios[t].importeTotal.toLocaleString()+"<\/div><\/td>         <\/tr>"),r=n.socios[t].socioEgreso;return i}function guardarImpuestosReales(){var n={Socios:GetDataSociosExSocios(),Mes:$("#hMes_CargaImpuestosReales").val()};$("#ImpuestosRealesForm").valid()&&n.Socios.length>0?($("#btnCargarExcel").prop("disabled",!0),$.post("/Independiente/GuardarImpuestosReales",{cvm:n}).done(function(n){n.IsEverythingGood==!0}).always(function(){CargarAlertas(frmHome);$("#btnCargarExcel").prop("disabled",!1)})):Danger("La carga del archivo excel y la selecci√≥n del mes combo son obligatorios para continuar.")}function ObjPersona(){return{IdPersona:null,Ganancias:null,SaldoDDJJGanancias:null,BienesPersonales:null,SaldoDDJJBienes:null,ImpuestoCedular:null,SaldoImpuestoCedular:null,ImporteTotal:null}}function GetDataSociosExSocios(){var n=[];return $("#ImpuestosRealesTable tbody tr[data-type='socio']").each(function(t,i){var r=ObjPersona();r.IdPersona=i.id;r.BienesPersonales=$("#BienesPersonales_"+i.id).attr("data-value");r.SaldoDDJJBienes=$("#DDJJBienesPersonales_"+i.id).attr("data-value");r.Ganancias=$("#ImpuestoGanancia_"+i.id).attr("data-value");r.SaldoDDJJGanancias=$("#DDJJGanancias_"+i.id).attr("data-value");r.ImpuestoCedular=$("#ImpuestoCedular_"+i.id).attr("data-value");r.SaldoImpuestoCedular=$("#DDJJImpuestoCedular_"+i.id).attr("data-value");r.ImporteTotal=$("#ImporteTotal_"+i.id).attr("data-value");n.push(r)}),n}function CierreImpuestos(){$.post("/Independiente/CierreImpuestos").done(function(n){n.IsEverythingGood==!0&&CargarMenu()}).always(function(){CargarAlertas(frmHome)})}