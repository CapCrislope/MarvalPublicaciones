function InicializarCombosAndCkeditor(){InicializarCKEDITOR("Landing_Header_en");InicializarCKEDITOR("Landing_Content_en");InicializarCKEDITOR("Landing_Meta_description_en");InicializarCKEDITOR("Landing_Header_es");InicializarCKEDITOR("Landing_Content_es");InicializarCKEDITOR("Landing_Meta_description_es");var n=JSON.parse("["+$("#hAreasPracticas"+frmModal).val()+"]"),t=JSON.parse("["+$("#hAutores"+frmModal).val()+"]"),i=$("#hImagenPosY"+frmModal).val(),r=$("#hCampania"+frmModal).val();new Combo({name:"AreasPracticas",view:frmModal,actionController:"/AreaPractica/LlenarAreasPracticas/",selectValue:n}).createBasicCombo();new Combo({name:"Autores",view:frmModal,actionController:"/Profesional/LlenarProfesionales/",selectValue:t}).createBasicCombo();new Combo({name:"ImagenPosY",view:frmModal,actionController:"/Articulo/LlenarComboPosImg/",cantItems:1,selectValue:i}).createBasicCombo();new Combo({name:"Campania",view:frmModal,actionController:"/LandingPage/LlenarComboCampania/",cantItems:1,selectValue:r}).createBasicCombo()}function InicializarTablaLandingPage(){$.fn.dataTable.ext.errMode="none";$("#LandingPageTable").on("error.dt",function(){CargarAlertas(frmLandingPage)});var n=$("#LandingPageTable").dataTable({dom:"lfrtip",sAjaxSource:"/LandingPage/LlenarJSONGrillaLandingPage",sServerMethod:"POST",columnDefs:[{type:"fecha",targets:2}],aoColumns:[{data:"Titulo",sWidth:"30%"},{data:"Profesionales",sWidth:"45%"},{data:"Fecha",sWidth:"10%"},{data:"IdLanding",sClass:"der",orderable:!1,sWidth:"20%",render:function(n,t,i){return BotoneraLandingPage(i)}}],bAutoWidth:!1,pageLength:50,language:{select:{rows:". %d filas seleccionadas"}},fnDrawCallback:function(){FuncionesBotoneraGrillaLandingPage()}})}function BotoneraLandingPage(n){var t="";return t+=n.Visible==1?'        <button type="button" class="habilitadoDialog btn btn-success btn-xs" data-clientid="'+n.IdLanding+'" title="Habilitado" value="1">             <span class="glyphicon glyphicon-off" aria-hidden="true"><\/span>         <\/button>':'        <button type="button" class="habilitadoDialog btn btn-danger btn-xs" data-clientid="'+n.IdLanding+'" title="DesHabilitado" value="0">             <span class="glyphicon glyphicon-off" aria-hidden="true"><\/span>         <\/button>',t+('        <button type="button" class="editDialog btn btn-default btn-xs" data-clientid="'+n.IdLanding+'" title="Editar">             <span class="glyphicon glyphicon-edit" aria-hidden="true"><\/span>         <\/button>         <button type="button" id="mat_'+n.IdLanding+'" class="btn btn-default btn-xs" data-toggle="confirmation" data-placement="left" data-singleton="true" data-on-confirm="EliminarLandingPage" data-title="¿Está seguro?" onclick="SelLandingPage('+n.IdLanding+');">             <span class="glyphicon glyphicon-remove" aria-hidden="true">             <\/span>         <\/button>        <a role="button" id="'+n.id+'" class="btn btn-default btn-xs" target="_blank" href="'+web_url_landing+n.Slug+"-"+n.IdLanding+'">             <span class="glyphicon glyphicon-globe" aria-hidden="true">             <\/span>         <\/a>')}function FuncionesBotoneraGrillaLandingPage(){$("[data-toggle=confirmation]").confirmation();$(".editDialog").off().on("click",function(){ModalLandingPage($(this).data("clientid"))});$(".habilitadoDialog").off().on("click",function(){var n=$(this),t=n.data("clientid"),i=n.attr("value");return $.post("/LandingPage/Habilitar/",{idLanding:t,Visible:i}).success(function(n){n.IsEverythingGood==!0&&ReloadTable("LandingPageTable",!1)}).always(function(){CargarAlertas(frmLandingPage)}),!1})}function SelLandingPage(n){$("#idLandingPage").val(n)}function EliminarLandingPage(){var n=$("#idLandingPage").val();$.post("/LandingPage/Eliminar",{idLanding:n}).success(function(n){n.IsEverythingGood==!0?ReloadTable("LandingPageTable",!1):n.IsRedirect}).always(function(){CargarAlertas(frmLandingPage)})}function AltaLandingPage(){ModalLandingPage(null)}function ModalLandingPage(n){$("#dialog").load("/LandingPage/ModalLandingPage",{IdLanding:n},function(n,t){t=="success"?$("#dialog").modal("show"):CargarAlertas(frmLandingPage)})}function ValidCampania(){return $("#CampaniaCombo").is(":checked")&&$("#hCampaniaModal").val()!=""||$("#Landing_NuevaCampania").is(":checked")&&$("#CampaniaTxt").val()!=""?!0:(Danger("El campo campaña es obligatorio."),!1)}function SaveLandingPage(){if($("#divFormatoFotoIncorrecto").addClass("hidden"),ValidarArchivo("inputFilePicture",formatosImagenesValidas))if($("#fileName_es").val()!=""&&$("#fileName_en").val()!=""){if(ValidCampania()&&($("#Landing_Header_en").val(CKEDITOR.instances.Landing_Header_en.getData()),$("#Landing_Content_en").val(CKEDITOR.instances.Landing_Content_en.getData()),$("#Landing_Meta_description_en").val(CKEDITOR.instances.Landing_Meta_description_en.getData()),$("#Landing_Header_es").val(CKEDITOR.instances.Landing_Header_es.getData()),$("#Landing_Content_es").val(CKEDITOR.instances.Landing_Content_es.getData()),$("#Landing_Meta_description_es").val(CKEDITOR.instances.Landing_Meta_description_es.getData()),$("#Landing_Destacado").val($("#Destacado").is(":checked")?1:0),$("#Landing_Priorizar").val($("#Priorizar").is(":checked")?1:0),$("#LandingPageForm").valid())){$("#btnGuardarLanding").button("loading");var n=new FormData($("#LandingPageForm")[0]);$.ajax({url:"/LandingPage/GuardarLandingPage",type:"POST",data:n,cache:!1,contentType:!1,processData:!1}).success(function(n){n.IsEverythingGood==!0?(ReloadTable("LandingPageTable",!0),$("#dialog").modal("hide")):n.IsRedirect}).always(function(){$("#btnGuardarLanding").button("reset");CargarAlertas(frmModal)})}}else $("#fileName_es").val()==""?$("#errorFile_es").removeClass("hidden"):$("#errorFile_en").removeClass("hidden");else $("#divFormatoFotoIncorrecto").removeClass("hidden");return!1}var frmLandingPage="LandingPage",frmModal="Modal",formatosImagenesValidas=["jpg","jpeg","png","bmp"];