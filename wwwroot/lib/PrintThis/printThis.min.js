(function(n){function i(n,t){t&&n.append(t.jquery?t.clone():t)}function r(t,i,r){var f=i.clone(r.formValues);r.formValues&&u(i,f,"select, textarea");r.removeScripts&&f.find("script").remove();r.printContainer?f.appendTo(t):f.each(function(){n(this).children().appendTo(t)})}function u(t,i,r){var u=t.find(r);i.find(r).each(function(t,i){n(i).val(u.eq(t).val())})}var t;n.fn.printThis=function(u){var s,o,h,e,c,f;t=n.extend({},n.fn.printThis.defaults,u);s=this instanceof jQuery?this:n(this);o="printThis-"+(new Date).getTime();window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)?(h='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script><\/head><body><\/body>")',e=document.createElement("iframe"),e.name="printIframe",e.id=o,e.className="MSIE",document.body.appendChild(e),e.src=h):(c=n("<iframe id='"+o+"' name='printIframe' />"),c.appendTo("body"));f=n("#"+o);t.debug||f.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"});typeof t.beforePrint=="function"&&t.beforePrint();setTimeout(function(){function p(n,t){var i,r;i=n.get(0);i=i.contentWindow||i.contentDocument||i;r=i.document||i.contentDocument||i;r.open();r.write(t);r.close()}function w(n,t){var i=n.get(0);i=i.contentWindow||i.contentDocument||i;typeof t=="function"&&("matchMedia"in i?i.matchMedia("print").addListener(function(n){n.matches&&t()}):i.onbeforeprint=t)}var c,u,y,l;t.doctypeString&&p(f,t.doctypeString);var h=f.contents(),o=h.find("head"),e=h.find("body"),a=n("base"),v;v=t.base===!0&&a.length>0?a.attr("href"):typeof t.base=="string"?t.base:document.location.protocol+"//"+document.location.host;o.append('<base href="'+v+'">');t.importCSS&&n("link[rel=stylesheet]").each(function(){var t=n(this).attr("href"),i;t&&(i=n(this).attr("media")||"all",o.append("<link type='text/css' rel='stylesheet' href='"+t+"' media='"+i+"'>"))});t.importStyle&&n("style").each(function(){o.append(this.outerHTML)});t.pageTitle&&o.append("<title>"+t.pageTitle+"<\/title>");t.loadCSS&&(n.isArray(t.loadCSS)?jQuery.each(t.loadCSS,function(){o.append("<link type='text/css' rel='stylesheet' href='"+this+"'>")}):o.append("<link type='text/css' rel='stylesheet' href='"+t.loadCSS+"'>"));c=n("html")[0];h.find("html").prop("style",c.style.cssText);u=t.copyTagClasses;u&&(u=u===!0?"bh":u,u.indexOf("b")!==-1&&e.addClass(n("body")[0].className),u.indexOf("h")!==-1&&h.find("html").addClass(c.className));u=t.copyTagStyles;u&&(u=u===!0?"bh":u,u.indexOf("b")!==-1&&e.attr("style",n("body")[0].style.cssText),u.indexOf("h")!==-1&&h.find("html").attr("style",c.style.cssText));i(e,t.header);t.canvas&&(y=0,s.find("canvas").addBack("canvas").each(function(){n(this).attr("data-printthis",y++)}));r(e,s,t);t.canvas&&e.find("canvas").each(function(){var i=n(this).data("printthis"),t=n('[data-printthis="'+i+'"]');this.getContext("2d").drawImage(t[0],0,0);n.isFunction(n.fn.removeAttr)?t.removeAttr("data-printthis"):n.each(t,function(n,t){t.removeAttribute("data-printthis")})});t.removeInline&&(l=t.removeInlineSelector||"*",n.isFunction(n.removeAttr)?e.find(l).removeAttr("style"):e.find(l).attr("style",""));i(e,t.footer);w(f,t.beforePrintEvent);setTimeout(function(){f.hasClass("MSIE")?(window.frames.printIframe.focus(),o.append("<script>  window.print(); <\/script>")):document.queryCommandSupported("print")?f[0].contentWindow.document.execCommand("print",!1,null):(f[0].contentWindow.focus(),f[0].contentWindow.print());t.debug||setTimeout(function(){f.remove()},1e3);typeof t.afterPrint=="function"&&t.afterPrint()},t.printDelay)},333)};n.fn.printThis.defaults={debug:!1,importCSS:!0,importStyle:!0,printContainer:!0,loadCSS:"",pageTitle:"",removeInline:!1,removeInlineSelector:"*",printDelay:1e3,header:null,footer:null,base:!1,formValues:!0,canvas:!0,doctypeString:"<!DOCTYPE html>",removeScripts:!1,copyTagClasses:!0,copyTagStyles:!0,beforePrintEvent:null,beforePrint:null,afterPrint:null}})(jQuery);