function FiltrosBusquedaCV(){$("#filstrosBusquedaCV").hasClass("shown")?($("#filstrosBusquedaCV").slideUp(400),$("#filstrosBusquedaCV").removeClass("shown"),$("span",$(".desplegableFiltros")).removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")):($("#filstrosBusquedaCV").slideDown(400),$("#filstrosBusquedaCV").addClass("shown"),$("span",$(".desplegableFiltros")).removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"))}function LimpiarFormBusquedaCV(){$("#busqueda_Apellido").val("");$("#busqueda_Dni").val("");$("#busqueda_FechaDesde").val("");$("#busqueda_FechaHasta").val("")}function BuscarCVs(){$("#BusquedaCVForm").valid()&&ReloadTable("TablaCV")}function GenerarComprimidoPDF(){$("#TablaCV .dataTables_empty").length==0?($("#btnExportarPDFs").button("loading"),$("#btnExportarPDFs").parents("a").addClass("disabled"),$.post("/CV/GenerarComprimidoPDF/",$("#BusquedaCVForm").serialize()).success(function(n){n.IsEverythingGood?window.location="/CV/ExportarComprimidoPDF?nombreComprimido="+n.ComprimidoNombre:CargarAlertas(frmCV)}).fail(function(){CargarAlertas(frmCV)}).always(function(){$("#btnExportarPDFs").button("reset");$("#btnExportarPDFs").parents("a").removeClass("disabled")})):Danger("Debe haber, por lo menos, 1 registro en la grilla.")}function ExportarExcelCompletoCSV(){$("#TablaCV td.dataTables_empty").length==0?($("#btnExportarCSVs").button("loading"),$("#btnExportarCSVs").parents("a").addClass("disabled"),$.post("/CV/GenerarExcelCompletoCSV",$("#BusquedaCVForm").serialize()).success(function(n){n.IsEverythingGood==!0?window.location="/CV/ExportarExcelCompleto?token="+n.Token:CargarAlertas(frmCV)}).fail(function(){CargarAlertas(frmCV)}).always(function(){$("#btnExportarCSVs").button("reset");$("#btnExportarCSVs").parents("a").removeClass("disabled")})):Danger("Debe haber, por lo menos, 1 registro en la grilla.")}function IniciarTablaCV(){$.fn.dataTable.ext.errMode="none";$("#TablaCV").on("error.dt",function(){CargarAlertas(frmCV)});var n=$("#TablaCV").dataTable({dom:"Blfrtip",buttons:[{text:'<span id="btnExportarCSVs" data-loading-text="<i class=\'glyphicon glyphicon-repeat fa-spin\'><\/i> Procesando" aria-hidden="true">Exportar CSV<\/span>',className:"btn btn-default btn-sm space1",action:function(){ExportarExcelCompletoCSV()}},{text:'<span id="btnExportarPDFs" data-loading-text="<i class=\'glyphicon glyphicon-repeat fa-spin\'><\/i> Procesando" aria-hidden="true">Exportar PDFs<\/span>',className:"btn btn-default btn-sm space1",action:function(){GenerarComprimidoPDF()}}],order:[[0,"desc"]],columnDefs:[{type:"fecha",targets:0}],sAjaxSource:"/CV/LlenarJSONGrillaCV",sServerMethod:"POST",aoColumns:[{data:"date",sWidth:"10%"},{data:"dni",sWidth:"10%"},{data:"first_name",sWidth:"35%"},{data:"last_name",sWidth:"35%"},{data:"id",sWidth:"10%",sClass:"der",orderable:!1,sWidth:"10%",render:function(n,t,i){return BotoneraGrillaCV(i)}}],bAutoWidth:!1,bProcessing:!0,pageLength:50,language:{select:{rows:". %d filas seleccionadas"}},fnDrawCallback:function(){FuncionesBotoneraGrillaCV()},fnServerData:function(n,t,i){$.ajax({dataType:"json",type:"POST",url:n,data:$("#BusquedaCVForm").serialize(),success:i})}})}function BotoneraGrillaCV(n){return""+('        <a href="javascript: ExportarPDF('+n.id+');" > \t\t\t<button type="button" class="btn btn-default btn-imagen-xs" title="Exportar PDF"> \t\t\t\t<span class="iconoPdf"><\/span> \t\t\t<\/button><\/a>        <button type="button" class="editDialog btn btn-default btn-xs" data-clientid="'+n.id+'" title="Editar">             <span class="glyphicon glyphicon-edit" aria-hidden="true"><\/span>         <\/button>         <button type="button" id="mat_'+n.id+'" class="btn btn-default btn-xs" data-toggle="confirmation" data-placement="left" data-singleton="true" data-on-confirm="EliminarCV" data-title="¿Está seguro?" onclick="SelCV('+n.id+');">             <span class="glyphicon glyphicon-remove" aria-hidden="true">             <\/span>         <\/button>')}function EliminarCV(){var n=$("#hIdCV").val();$.post("/CV/EliminarCV",{idCV:n}).success(function(n){n.IsEverythingGood==!0?ReloadTable("TablaCV",!1):n.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmCV)})}function SelCV(n){$("#hIdCV").val(n)}function FuncionesBotoneraGrillaCV(){$("[data-toggle=confirmation]").confirmation();$(".dt-button").removeClass("dt-button");$(".dt-buttons").addClass("space1");$(".editDialog").off().on("click",function(){DialogModalCVBase($(this).data("clientid"),0)})}function AltaCV(){var n=undefined;DialogModalCVBase(n,0,function(){$("#tabCV > ul.nav-tabs > li:not(.obligatorio)").addClass("disabled")})}function DialogModalCVBase(n,t,i){var r=t||0;$("#dialog").load("/DialogBases/ModalCV.html",function(t,u){u=="success"?($("#hidCVBase").val(n),$("#tabCV > ul.nav-tabs > li > a")[r].click(),i&&i(),$("#dialog").modal("show")):CargarAlertas(frmCV)})}function ExportarPDF(n){$.post("/CV/ExportarPDF/",{idCV:n}).success(function(n){n.IsEverythingGood?window.open(n.RutaPDF,"_blank"):CargarAlertas(frmModal)}).error(function(){CargarAlertas(frmModal)})}var frmCV="CV",frmModal="Modal",frmCombo="Combo";