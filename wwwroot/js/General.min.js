function HandlerLanguage(){Cookies.get("LangForMarval")===undefined&&Cookies.set("LangForMarval","es");var n=Cookies.get("LangForMarval");$(".setLang[lang='"+n+"']").addClass("active-lang");$(".setLang").on("click",function(){var n=$(this).attr("lang");$(".active-lang").removeClass("active-lang");$(this).addClass("active-lang");Cookies.set("LangForMarval",n);setNewLanguage(n);location.reload(!0)})}function GetActiveLang(){return Cookies.get("LangForMarval")}function AbrirYCerrarNav(){var n,t;if(CerrarBusquedaNavegador(),n=$(".container-nav-menu"),abierto=n.data("abierto")??!1,abierto){$(".items-nav-menu").removeClass("items-nav-menu-abierto");n.data("abierto",!1);setTimeout(function(){$(".items-nav-menu").css("display","none")},500);t=$(".submenu-nav-menu");t.removeClass("submenu-nav-menu-abierto");$(".items-nav-menu ul li a").removeClass("border-bottom-nav");$("main").css("max-height","none");t.data("abierto",!1);$(".fondo-oscuro-nav").css("display","none");return}$(".items-nav-menu").css("display","flex").promise().then(()=>{$(".items-nav-menu").addClass("items-nav-menu-abierto"),$(".fondo-oscuro-nav").css("display","block"),n.data("abierto",!0)})}function CerrarBusquedaNavegador(){$("#submenu-buscador-menu").removeClass("submenu-buscador-menu-abierto");$("#form-buscador-menu #buscador").val("")}function AbrirSubmenuDesktop(){$(".items-nav-menu ul li a").hover(function(){var i=$(".submenu-nav-menu"),n,r,t;(i.removeClass("submenu-nav-menu-abierto"),$(".items-nav-menu ul li a").removeClass("border-bottom-nav"),$(".hijo-container-nav").removeClass("hijo-container-nav-abierto"),$(".nombre-li-submenu .material-icons").removeClass("girar-180"),CerrarBusquedaNavegador(),i.data("abierto",!1),n=$(this),n.addClass("border-bottom-nav"),r=n.data("expandir")??!1,r)&&(t=$(n.attr("href")),t.addClass("submenu-nav-menu-abierto"),t.data("abierto",!0))});$(".lupa-icon-nav-menu").hover(function(){$(".submenu-nav-menu").removeClass("submenu-nav-menu-abierto");var n=$("#submenu-buscador-menu");n.addClass("submenu-buscador-menu-abierto")});$(".container-nav-menu").on("mouseleave",function(){var n=$(".submenu-nav-menu");n.removeClass("submenu-nav-menu-abierto");$(".items-nav-menu ul li a").removeClass("border-bottom-nav");$(".hijo-container-nav").removeClass("hijo-container-nav-abierto");$(".nombre-li-submenu .material-icons").removeClass("girar-180");CerrarBusquedaNavegador();n.data("abierto",!1)})}function AbrirSubmenuMobile(){$(".items-nav-menu ul li a").on("click",function(){var n=$(this),r=n.data("expandir")??!1;if(r){var t=$(n.attr("href")),u=t.data("abierto")??!1,i=$(".submenu-nav-menu");(i.removeClass("submenu-nav-menu-abierto"),$(".items-nav-menu ul li a").removeClass("border-bottom-nav"),$("main").css("max-height","none"),i.data("abierto",!1),u)||(t.addClass("submenu-nav-menu-abierto"),n.addClass("border-bottom-nav"),$("main").css("max-height","100vh"),t.data("abierto",!0),UpTo("#viewport"))}});$(".lupa-icon-nav-menu, .cerrar-buscador-menu").on("click",function(){var n=$("#submenu-buscador-menu");n.hasClass("submenu-buscador-menu-abierto")?CerrarBusquedaNavegador():n.addClass("submenu-buscador-menu-abierto")})}function SetearFuncionesNavegador(){$(window).width()>768?AbrirSubmenuDesktop():AbrirSubmenuMobile()}function AbrirHijos(n,t){var r=$(".hijo-container-nav"),i=$("#hijo-submenu-"+n),u=i.hasClass("hijo-container-nav-abierto");(r.removeClass("hijo-container-nav-abierto"),$(".nombre-li-submenu .material-icons").removeClass("girar-180"),u)||(i.addClass("hijo-container-nav-abierto"),$(t).addClass("girar-180"))}function Buscador(){var n=$("#form-buscador-menu #buscador").val();n!=""&&(window.location.href="/buscador?q="+n)}function BuscadorNavegador(n){if(n=$("#"+n),$(window).width()>768)$(".texto-del-nav").css("opacity",.7),n.css("opacity",1);else{let t=$(".nav-detalle .destacada-nav-detalle"),i=$(".nav-detalle .destacada-nav-detalle").html(),r=n.html();t.html(r);n.html(i);$(".nav-detalle").removeClass("nav-detalle-abierto")}}function BuscadorProfesional(n,t=1){BuscadorNavegador("buscador-profesionales");$("#pnlContenido").load("/Profesionales/ProfesionalesParaBuscador",{Palabras:n,NroPag:t},function(n,t){t=="success"})}function BuscadorAreasPracticas(n,t=1){BuscadorNavegador("buscador-areaspracticas");$("#pnlContenido").load("/AreasPracticas/AreasPracticasParaBuscador",{Palabras:n,NroPag:t},function(n,t){t=="success"})}function BuscadorPremios(n,t=1){BuscadorNavegador("buscador-premios");$("#pnlContenido").load("/Premios/PremiosParaBuscador",{Palabras:n,NroPag:t},function(n,t){t=="success"})}function getEmailSuccefull(){GetActiveLang()=="es"?Success(mje_emailenviado_es):Success(mje_emailenviado_en)}function BuscadorContenido(n){BuscadorNavegador("buscador-contenidos");$("#pnlContenido").load("/Home/ContenidoBuscador",{palabra:n},function(n,t){t=="success"})}function MaximizarMinimizar(n,t){let i=$("#body"+n);t=$(t);let r=$("#footer"+n);if(!i.hasClass("maximizar-minimizar-abierto")){$(".maximizar-minimizar").removeClass("maximizar-minimizar-abierto");$(".cargar-mas-buscador").removeClass("cargar-mas-buscador-mostrar");$(".abrir-cerrar-panel-buscador .material-icons").html("add");i.addClass("maximizar-minimizar-abierto");t.html("minimize");let n=r.data("mostrar")??!0;n&&r.addClass("cargar-mas-buscador-mostrar");return}i.removeClass("maximizar-minimizar-abierto");t.html("add");r.removeClass("cargar-mas-buscador-mostrar")}function CargarPanelesContenido(n){BuscadorInsights(n);BuscadorEventos(n);BuscadorNovedades(n);BuscadorPodcasts(n)}function BuscadorInsights(n){return new Promise(t=>{let i="Insights",u=$("#contador"+i),r=parseInt(u.val())+1;u.val(r);$.get("/"+i+"/"+i+"ParaBuscador",{Palabras:n,NroPag:r},function(n){n!=""&&$("#section-"+i).css("display","block");$(n).appendTo("#pnl"+i);r<parseInt($("#totalPages"+i).val())?$("#footer"+i).data("mostrar",!0):($("#footer"+i).data("mostrar",!1),$("#footer"+i).removeClass("cargar-mas-buscador-mostrar"));t()})})}function BuscadorEventos(n){return new Promise(t=>{let i="Eventos",u=$("#contador"+i),r=parseInt(u.val())+1;u.val(r);$.get("/"+i+"/"+i+"ParaBuscador",{Palabras:n,NroPag:r},function(n){n!=""&&$("#section-"+i).css("display","block");$(n).appendTo("#pnl"+i);r<parseInt($("#totalPages"+i).val())?$("#footer"+i).data("mostrar",!0):($("#footer"+i).data("mostrar",!1),$("#footer"+i).removeClass("cargar-mas-buscador-mostrar"));t()})})}function BuscadorNovedades(n){return new Promise(t=>{let i="Novedades",u=$("#contador"+i),r=parseInt(u.val())+1;u.val(r);$.get("/"+i+"/"+i+"ParaBuscador",{Palabras:n,NroPag:r},function(n){n!=""&&$("#section-"+i).css("display","block");$(n).appendTo("#pnl"+i);r<parseInt($("#totalPages"+i).val())?$("#footer"+i).data("mostrar",!0):($("#footer"+i).data("mostrar",!1),$("#footer"+i).removeClass("cargar-mas-buscador-mostrar"));t()})})}function BuscadorPodcasts(n){return new Promise(t=>{let i="Podcasts",u=$("#contador"+i),r=parseInt(u.val())+1;u.val(r);$.get("/"+i+"/"+i+"ParaBuscador",{Palabras:n,NroPag:r},function(n){n!=""&&$("#section-"+i).css("display","block");$(n).appendTo("#pnl"+i);r<parseInt($("#totalPages"+i).val())?$("#footer"+i).data("mostrar",!0):($("#footer"+i).data("mostrar",!1),$("#footer"+i).removeClass("cargar-mas-buscador-mostrar"));t()})})}function setNewLanguage(n){var t=window.location.href;let r=t.indexOf("lang=")==-1?undefined:t.indexOf("lang="),f=t.lastIndexOf("lang=")+7==6?undefined:t.lastIndexOf("lang=")+7,i=t;r!=undefined&&f!=undefined&&(i=t.substring(0,r));let u=i[i.length-1];i+=u=="/"||u=="&"?"lang="+n:"&lang="+n;window.location.href=i}function IniciarLocomotiveScroll(n=false){if(scroll=new LocomotiveScroll({el:document.querySelector("[data-scroll-container]"),smooth:!0,tablet:{smooth:!0},smartphone:{smooth:!0},repeat:!1}),n)scroll.on("scroll",()=>{scroll.scroll.instance.scroll.y>0?($("#logo").removeClass("start"),$("#menu").removeClass("start")):($("#logo").addClass("start"),$("#menu").addClass("start"))})}function IniciarScrollTrigger(n=false){var t;gsap.registerPlugin(ScrollTrigger);gsap.registerPlugin(TextPlugin);t=window.Scrollbar;class e extends t.ScrollbarPlugin{static pluginName="modal";static defaultOptions={open:false};transformDelta(n){return this.options.open?{x:0,y:0}:n}}t.use(e);bodyScrollBar=t.init(document.body,{damping:.1,delegateTo:document,plugins:{modal:{open:!1}}});bodyScrollBar.setPosition(0,0);bodyScrollBar.track.xAxis.element.remove();ScrollTrigger.scrollerProxy("#viewport",{scrollTop(n){return arguments.length&&(bodyScrollBar.scrollTop=n),bodyScrollBar.scrollTop},getBoundingClientRect(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}});var i=document.getElementById("menu"),r=document.getElementById("btnSubir"),u=document.getElementById("dialog-personalizado"),f=document.getElementById("BtnTest");bodyScrollBar.addListener(function(t){var e=t.offset;i!=null&&(i.style.top=e.y+"px",i.style.left=e.x+"px");r!=null&&(r.style.top=e.y+(window.innerHeight-60)+"px",r.style.right="60px");u!=null&&(u.style.top=e.y+"px",u.style.left=e.x+"px");f!=null&&(f.style.top=e.y+(window.innerHeight-60)+"px",f.style.left="20px");let o=$("#btnSubir"),s=o.data("mostrar")??!1;e.y>0?s&&o.removeClass("d-none").promise().then(()=>{o.addClass("btn-subir-activado")}):(o.removeClass("btn-subir-activado"),setTimeout(function(){o.addClass("d-none")},500));n&&(e.y>0?$(".menu").removeClass("start"):$(".menu").addClass("start"))});bodyScrollBar.addListener(()=>{ScrollTrigger.update()})}function IniciarIntersectionObservers(){obsAnimation=new IntersectionObserver(n=>{n.forEach(n=>{if(n.isIntersecting)n.target.classList.add("fadeInUp"),obsAnimation.unobserve(n.target);else return})});obsLoad=new IntersectionObserver(n=>{n.forEach(n=>{n.isIntersecting&&(n.target.dataset.func!=undefined&&eval(n.target.dataset.func)(),obsLoad.unobserve(n.target))})},{rootMargin:"500px"})}function refreshScrollbar(){Scrollbar.initAll()}function UpTo(n){bodyScrollBar.scrollIntoView(document.querySelector(n),{offsetTop:100,offsetLeft:100})}function CargarBanner(){$("#pnlBanner").load("/Home/Banner",function(n,t){t=="success"&&(document.querySelector("#pnlBanner .loadNext").dataset.func="CargarFooter",document.querySelectorAll("#pnlBanner .loadNext").forEach(n=>{obsLoad.observe(n)}))})}function CargarFooter(){$("#pnlFooter").load("/Home/Footer",function(n,t){t=="success"})}function CargarMenu(){$("#menu").load("/Home/Menu",function(n,t){t=="success"})}function InicializarDatePickers(){$.fn.datepicker.defaults.format=$(".active-lang").attr("lang")=="es"?"dd/mm/yyyy":"mm/dd/yyyy";$(".date").datepicker({clearBtn:!0,language:$(".active-lang").attr("lang")});$(".date").on("change",function(){$(".datepicker").hide()});$.each($(".date > input"),function(n,t){t.value=t.value.split(" ")[0]})}function sleep(n){return new Promise(t=>setTimeout(t,n))}function goToPage(n){var t=$(n).attr("data-value");return t!=0&&t!=null?(localStorage.setItem("data-value",t),localStorage.setItem("data-param",$(n).attr("data-param"))):localStorage.setItem("data-value",0),localStorage.setItem("doSearch",1),window.location.href=$(n).attr("data-href"),!0}function ObtenerSearchParams(n){var i=localStorage.getItem("data-value"),t;if(i!="0"&&i!=null&&i!=""){var u=localStorage.getItem("data-param"),r=i.split(";"),f=u.split(";");for(t=0;t<r.length;t++)$("#"+f[t]+n).val(r[t]);localStorage.removeItem("data-value");localStorage.removeItem("data-param");localStorage.removeItem("data-href")}}function ComprobacionVisitanteId(n,t){var i=localStorage.userId;$.post("/Home/ComprobacionVisitanteId",{VisitanteId:i}).done(function(r){r.isEverythingGood==!0&&(t=="Insight"||t=="Evento"?ModalRegistro(t,i):r.existeVisitante==0?ModalRegistro(t,null):n())}).always(function(){})}function ModalRegistro(){}function AbrirShare(){var n=document.getElementsByClassName("share");n[0].classList.contains("open")?n[0].classList.remove("open"):n[0].classList.add("open")}function AbrirLink(n){window.open(n,"_blank")}function CortarParrafos(n){return new Promise(t=>{var e=$("."+n),i=e.html(),o=[],r,h,f,c,s,u,a;if(window.matchMedia("(min-width: 768px)").matches)o=i.split("\n");else{i=i.replace(/\n/g," ");i=i.trim();var v=e.css("width"),l=!0;do{for(r="",h=0,u=0;u<i.length;u++){if(h+=parseInt("10px"),h>=parseInt(v)){for(f=r.length-1;f>=0;f--)if(r[f]==" "||r[f+1]==" "){for(c="",s=0;s<f;s++)c+=r[s];r=c;break}break}r+=i[u]}o.push(r);i=i.replace(r,"");i.trim()==""&&(l=!1)}while(l)}for(e.html(""),u=0;u<o.length;u++)a='<div class="intro-line">'+o[u]+"<\/div>",$(a).appendTo(e);t()})}function AbrirCerrarNavDetalle(){let n=$(".nav-detalle");var t=n.hasClass("nav-detalle-abierto")??!1;if(t){n.removeClass("nav-detalle-abierto");return}n.addClass("nav-detalle-abierto")}function ActivarBotonSubir(){$("#btnSubir").data("mostrar",!0)}function AbrirModalPersonalizado(){let n=$("#dialog-personalizado");if(!n.hasClass("dialog-personalizado-abierto")){n.removeClass("d-none").promise().then(()=>{n.addClass("dialog-personalizado-abierto")});bodyScrollBar.updatePluginOptions("modal",{open:!0});return}n.removeClass("dialog-personalizado-abierto");bodyScrollBar.updatePluginOptions("modal",{open:!1});setTimeout(function(){n.addClass("d-none");n.html("")},500)}function CargarModalSuscripcionNewsletter(){$("#dialog-personalizado").load("/Home/ModalFormularioSuscripcionNewsletters",function(n,t){t=="success"&&AbrirModalPersonalizado()})}function CargarFormularioDynamics(n,t){let r="https://assets-usa.mkt.dynamics.com/a91d8d7d-758d-ee11-8172-6045bdd4f42a/digitalassets/forms/"+t;const i=document.querySelector(n);i!=undefined&&i.appendChild(d365mktforms.createForm(t,"https://public-usa.mkt.dynamics.com/api/v1.0/orgs/a91d8d7d-758d-ee11-8172-6045bdd4f42a/landingpageforms",r))}var bodyScrollBar,publicKey="6LeSl1MUAAAAAAxATncj9dwdo13aHMfuBWwzu2yF",base_url_path="https://www.marval.com/",mje_emailenviado_es="¡E-mail enviado!",mje_emailenviado_en="E-mail sent!";const toggleMenuOpen=()=>{document.body.classList.toggle("open"),$(".pnlSubmenu").removeClass("show"),$(".nav-link").addClass("collapsed")};