function IniciarCombosHomeArticulo(){return new Combo({name:"AreaPractica",view:frmArticulo,actionController:"/AreaPractica/LlenarAreasPracticas/"}).createBasicCombo(),new Combo({name:"Autor",view:frmArticulo,actionController:"/Profesional/LlenarProfesionales/"}).createBasicCombo(),!1}function FiltrosBusquedaArticulo(){$("#filstrosBusquedaArticulo").hasClass("shown")?($("#filstrosBusquedaArticulo").slideUp(400),$("#filstrosBusquedaArticulo").removeClass("shown"),$("span",$(".desplegableFiltros")).removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")):($("#filstrosBusquedaArticulo").slideDown(400),$("#filstrosBusquedaArticulo").addClass("shown"),$("span",$(".desplegableFiltros")).removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"))}function ModalArticulo(n){$("#dialog").load("/Articulo/ModalArticulo",{idArticulo:n},function(n,t){t=="success"?$("#dialog").modal("show"):CargarAlertas(frmArticulo)})}function LimpiarFormBusquedaArticulo(){$("#hAreaPractica"+frmArticulo).val("");$("#hAutor"+frmArticulo).val("");$("#ddlAreaPractica"+frmArticulo)[0].selectize.clear();$("#ddlAutor"+frmArticulo)[0].selectize.clear();$("#busqueda_Texto").val("");$("#busqueda_FechaDesde").val("");$("#busqueda_FechaHasta").val("")}function BuscarArticulos(){$("#BusquedaArticuloForm").valid()&&ReloadTable("TablaArticulo")}function IniciarTablaArticulo(){$.fn.dataTable.ext.errMode="none";$("#TablaArticulo").on("error.dt",function(){CargarAlertas(frmArticulo)});var n=$("#TablaArticulo").dataTable({dom:"Blfrtip",buttons:[{text:'<span class="iconoExcel" aria-hidden="true" title="Exportar a Excel"><\/span>',className:"btn btn-default btn-sm btn-imagen space1",action:function(){ExportarExcelCompletoArticulos()}},],order:[[2,"desc"]],columnDefs:[{type:"fecha",targets:2}],sAjaxSource:"/Articulo/LlenarJSONGrillaArticulo",sServerMethod:"POST",aoColumns:[{data:"title_es",sWidth:"30%"},{data:"Autores",sWidth:"30%"},{data:"pub_date",sWidth:"10%",render:function(n,t,i){return i.pub_date||""}},{data:"featured",sWidth:"6%",render:function(n,t,i){return i.featured?"Sí":"No"}},{data:"priorizar",sWidth:"6%",render:function(n,t,i){return i.priorizar?"Sí":"No"}},{data:"id",sWidth:"16%",sClass:"der",orderable:!1,sWidth:"10%",render:function(n,t,i){return BotoneraGrillaArticulo(i)}}],bAutoWidth:!1,bProcessing:!0,pageLength:50,language:{select:{rows:". %d filas seleccionadas"}},fnDrawCallback:function(){FuncionesBotoneraGrillaArticulo()},fnServerData:function(n,t,i){$.ajax({dataType:"json",type:"POST",url:n,data:$("#BusquedaArticuloForm").serialize(),success:i})}})}function ExportarExcelCompletoArticulos(){$("#TablaArticulo td.dataTables_empty").length==0?$.post("/Articulo/GenerarExcelCompletoArticulos",$("#BusquedaArticuloForm").serialize()).success(function(n){n.IsEverythingGood==!0&&(window.location="/Articulo/ExportarExcelCompleto?token="+n.Token)}).always(function(){CargarAlertas(frmArticulo)}):Danger("Debe haber, por lo menos, 1 registro en la grilla.")}function BotoneraGrillaArticulo(n){var t="";return t+=n.visible==1?'        <button type="button" class="habilitadoDialog btn btn-success btn-xs" data-clientid="'+n.id+'" title="Habilitado" value="0">             <span class="glyphicon glyphicon-off" aria-hidden="true"><\/span>         <\/button>':'        <button type="button" class="habilitadoDialog btn btn-danger btn-xs" data-clientid="'+n.id+'" title="DesHabilitado" value="1">             <span class="glyphicon glyphicon-off" aria-hidden="true"><\/span>         <\/button>',t+('        <button type="button" class="editDialog btn btn-default btn-xs" data-clientid="'+n.id+'" title="Editar">             <span class="glyphicon glyphicon-edit" aria-hidden="true"><\/span>         <\/button>         <button type="button" id="mat_'+n.id+'" class="btn btn-default btn-xs" data-toggle="confirmation" data-placement="left" data-singleton="true" data-on-confirm="EliminarArticulo" data-title="¿Está seguro?" onclick="SelArticulo('+n.id+');">             <span class="glyphicon glyphicon-remove" aria-hidden="true">             <\/span>         <\/button>        <a role="button" id="'+n.id+'" class="btn btn-default btn-xs" target="_blank" href="'+base_web_url+n.slug+'">             <span class="glyphicon glyphicon-globe" aria-hidden="true">             <\/span>         <\/a>')}function EliminarArticulo(){var n=$("#hIdArticulo").val();$.post("/Articulo/EliminarArticulo",{idArticulo:n}).success(function(n){n.IsEverythingGood==!0?ReloadTable("TablaArticulo",!1):n.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmArticulo)})}function SelArticulo(n){$("#hIdArticulo").val(n)}function FuncionesBotoneraGrillaArticulo(){$("[data-toggle=confirmation]").confirmation();$(".dt-button").removeClass("dt-button");$(".dt-buttons").addClass("space1");$(".editDialog").off().on("click",function(){ModalArticulo($(this).data("clientid"),function(){IniciarCombosModalArticulo(JSON.parse("["+$("#hAreasPracticas"+frmModal).val()+"]"),JSON.parse("["+$("#hAutores"+frmModal).val()+"]"),$("#hImagenPosY"+frmModal).val(),JSON.parse("["+$("#hTags"+frmModal).val()+"]"))})});$(".habilitadoDialog").off().on("click",function(){var n=$(this),i=n.data("clientid"),t=n.attr("value");return $.post("/Articulo/HabilitarArticulo/",{idArticulo:i,habilitado:t}).success(function(i){i.IsEverythingGood==!0&&(t==1?(n.attr("value",0),n.removeClass("btn-danger"),n.addClass("btn-success")):(n.attr("value",1),n.removeClass("btn-success"),n.addClass("btn-danger")))}).always(function(){CargarAlertas(frmArticulo)}),!1})}function AltaArticulo(){ModalArticulo(null,function(){IniciarCombosModalArticulo()})}function ModalArticulo(n,t){$("#dialog").load("/Articulo/ModalArticulo",{idArticulo:n},function(n,i){i=="success"?($("#dialog").modal("show"),t&&t()):CargarAlertas(frmArticulo)})}var frmArticulo="Articulo",frmModal="Modal",frmHome="Home",frmCombo="Combo";