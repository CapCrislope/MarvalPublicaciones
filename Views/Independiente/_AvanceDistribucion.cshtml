@model DistribucionUtilidades.Models.VM.AvanceDistribucionVM

<div class="row mb-3">
   
    <div class="col-md-12">
        <div>
           <h3>Avance de Distribución</h3>
        </div>
    </div>
    
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <p class="leyenda">
            En este módulo, puede visualizar el avance de las distribuciones y el saldo hasta el momento.
        </p>
    </div>
</div>

<div class="table-responsive">
    <table id="ImpuestosAcumuladosTable" class="table">
        <thead class="thead-dark">
            <tr>
                <th width="17%" scope="col">Socio/Ex-Socio</th>
                <th width="10%" scope="col">Saldo Inicial</th>
                <th width="10%" scope="col">Total Bruto <br />Distribuido</th>
                <th width="9%" scope="col">Bienes<br />Personales</th>
                <th width="9%" scope="col">Saldo DDJJ<br />Bienes<br />Personales</th>
                <th width="9%" scope="col">Impuestos<br />Ganancias</th>
                <th width="9%" scope="col">Saldo DDJJ<br />Ganancias</th>
                <th width="9%" scope="col">Impuesto<br />Cedular</th>
                <th width="9%" scope="col">Saldo DDJJ<br />Impuesto<br />Cedular</th>
                <th width="9%" scope="col">Saldo</th>
            </tr>

        </thead>

        <tbody>
            @{
                // Totales de los SOCIOS
                long Importe_TotalSaldoInicialSocios = Model.AcumuladoSocios.Sum(item => item.SaldoInicial);
                long Importe_TotalDistribuidoSocios = Model.AcumuladoSocios.Sum(item => item.ImporteDistribucion);
                long Importe_TotalImpuestosGananciasSocios = Model.AcumuladoSocios.Sum(item => item.Ganancias);
                long Importe_TotalBienesPersonalesSocios = Model.AcumuladoSocios.Sum(item => item.BienesPersonales);
                long Importe_TotalSaldoDDJJBienesPersonalesSocios = Model.AcumuladoSocios.Sum(item => item.SaldoDDJJBienes);
                long Importe_TotalSaldoDDJJGananciasSocios = Model.AcumuladoSocios.Sum(item => item.SaldoDDJJGanancias);
                long Importe_TotalSaldoDDJJImpuestoCedularSocios = Model.AcumuladoSocios.Sum(item => item.SaldoDDJJCedular);
                long Importe_TotalImpuestoCedularSocios = Model.AcumuladoSocios.Sum(item => item.ImpuestoCedular);
                long Importe_TotalSaldoSocios = 0;



                // Totales de los ExSocios
                long Importe_TotalSaldoInicialExSocios = Model.AcumuladoExSocios.Sum(item => item.SaldoInicial);
                long Importe_TotalDistribuidoExSocios = Model.AcumuladoExSocios.Sum(item => item.ImporteDistribucion);
                long Importe_TotalImpuestosGananciasExSocios = Model.AcumuladoExSocios.Sum(item => item.Ganancias);
                long Importe_TotalBienesPersonalesExSocios = Model.AcumuladoExSocios.Sum(item => item.BienesPersonales);
                long Importe_TotalSaldoDDJJBienesPersonalesExSocios = Model.AcumuladoExSocios.Sum(item => item.SaldoDDJJBienes);
                long Importe_TotalSaldoDDJJGananciasExSocios = Model.AcumuladoExSocios.Sum(item => item.SaldoDDJJGanancias);
                long Importe_TotalSaldoDDJJImpuestoCedularExSocios = Model.AcumuladoExSocios.Sum(item => item.SaldoDDJJCedular);
                long Importe_TotalImpuestoCedularExSocios = Model.AcumuladoExSocios.Sum(item => item.ImpuestoCedular);
                long Importe_TotalSaldoExSocios = 0;

                //----- Suma de los totales
                long SumaTotalSaldoInicial = Importe_TotalSaldoInicialSocios + Importe_TotalSaldoInicialExSocios;
                long SumaTotalDistribuido = Importe_TotalDistribuidoSocios + Importe_TotalDistribuidoExSocios;
                long SumaTotalImpuestosGanancias = Importe_TotalImpuestosGananciasSocios + Importe_TotalImpuestosGananciasExSocios;
                long SumaTotalBienesPersonales = Importe_TotalBienesPersonalesSocios + Importe_TotalBienesPersonalesExSocios;
                long SumaTotalSaldoDDJJBienesPersonales = Importe_TotalSaldoDDJJBienesPersonalesSocios + Importe_TotalSaldoDDJJBienesPersonalesExSocios;
                long SumaTotalSaldoDDJJGanancias = Importe_TotalSaldoDDJJGananciasSocios + Importe_TotalSaldoDDJJGananciasExSocios;
                long SumaTotalSaldoDDJJImpuestoCedular = Importe_TotalSaldoDDJJImpuestoCedularSocios + Importe_TotalSaldoDDJJImpuestoCedularExSocios;
                long SumaTotalImpuestoCedular = Importe_TotalImpuestoCedularSocios + Importe_TotalImpuestoCedularExSocios;
                long SumaTotalSaldos = Importe_TotalSaldoSocios + Importe_TotalSaldoExSocios;


                if (Model.AcumuladoSocios.Count > 0)
                {
                    for (int i = 0; i < Model.AcumuladoSocios.Count; i++)
                    {
                        <tr id="@Model.AcumuladoSocios[i].IdPersona" data-type="Socio" data-row="@i">
                            <td>@Model.AcumuladoSocios[i].Socio</td>
                            <td>
                                <div>
                                    $ @Model.AcumuladoSocios[i].SaldoInicial.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div>
                                    $ @Model.AcumuladoSocios[i].ImporteDistribucion.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="ImporteBienesPersonales_@Model.AcumuladoSocios[i].IdPersona" data-val="@Model.AcumuladoSocios[i].BienesPersonales">
                                    $ @Model.AcumuladoSocios[i].BienesPersonales.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSaldoDDJJBienes_@Model.AcumuladoSocios[i].IdPersona" data-val="@Model.AcumuladoSocios[i].SaldoDDJJBienes">

                                    $ @(Model.AcumuladoSocios[i].SaldoDDJJBienes.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="ImporteGanancias_@Model.AcumuladoSocios[i].IdPersona" data-val="@Model.AcumuladoSocios[i].Ganancias">
                                    $ @(Model.AcumuladoSocios[i].Ganancias.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSaldoDDJJGanancias_@Model.AcumuladoSocios[i].IdPersona" data-val="@Model.AcumuladoSocios[i].SaldoDDJJGanancias">

                                    $ @(Model.AcumuladoSocios[i].SaldoDDJJGanancias.ToString("N0"))

                                </div>
                            </td>

                            <td>
                                <div id="ImporteImpuestoCedular_@Model.AcumuladoSocios[i].IdPersona" data-val="@Model.AcumuladoSocios[i].ImpuestoCedular">

                                    $ @(Model.AcumuladoSocios[i].ImpuestoCedular.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSaldoDDJJCedular_@Model.AcumuladoSocios[i].IdPersona" data-val="@Model.AcumuladoSocios[i].SaldoDDJJCedular">

                                    $ @(Model.AcumuladoSocios[i].SaldoDDJJCedular.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="Importe_@Model.AcumuladoSocios[i].IdPersona">

                                    @{
                                        long AcumuladoSocio = (Model.AcumuladoSocios[i].SaldoInicial - (Model.AcumuladoSocios[i].ImpuestoCedular + Model.AcumuladoSocios[i].SaldoDDJJCedular +
                                                                                                                             Model.AcumuladoSocios[i].SaldoDDJJGanancias + Model.AcumuladoSocios[i].Ganancias +
                                                                                                                             Model.AcumuladoSocios[i].SaldoDDJJBienes + Model.AcumuladoSocios[i].BienesPersonales +
                                                                                                                             Model.AcumuladoSocios[i].ImporteDistribucion));
                                        Importe_TotalSaldoSocios = Importe_TotalSaldoSocios + AcumuladoSocio;
                                    }
                                    $ @(AcumuladoSocio.ToString("N0"))
                                </div>
                            </td>
                        </tr>
                                            }
                                        }

                                        //----------------------totalSocios
                        <tr id="totalSocios" class="bg-total">
                            <td>Total Socios</td>


                            <td>
                                <div id="">
                                    $ @Importe_TotalSaldoInicialSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="">
                                    $ @Importe_TotalDistribuidoSocios.ToString("N0")
                                </div>

                            </td>
                            <td>
                                <div id="Importe_TotalBienesPersonalesSocios" data-val="@Importe_TotalBienesPersonalesSocios">
                                    $ @Importe_TotalBienesPersonalesSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalSaldoDDJJBienesPersonalesSocios" data-val="@Importe_TotalSaldoDDJJBienesPersonalesSocios">
                                    $ @Importe_TotalSaldoDDJJBienesPersonalesSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalImpuestosGananciasSocios" data-val="@Importe_TotalImpuestosGananciasSocios">
                                    $ @Importe_TotalImpuestosGananciasSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalSaldoDDJJGananciasSocios" data-val="@Importe_TotalSaldoDDJJGananciasSocios">
                                    $ @Importe_TotalSaldoDDJJGananciasSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalImpuestoCedularSocios" data-val="@Importe_TotalImpuestoCedularSocios">
                                    $ @Importe_TotalImpuestoCedularSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalSaldoDDJJImpuestoCedularSocios" data-val="@Importe_TotalSaldoDDJJImpuestoCedularSocios">
                                    $ @Importe_TotalSaldoDDJJImpuestoCedularSocios.ToString("N0")
                                </div>
                            </td>


                            <td>
                                <div id="">
                                    $ @Importe_TotalSaldoSocios.ToString("N0")
                                </div>
                            </td>

                        </tr>
                //--------------------------------------------------------------------------------
                if (Model.AcumuladoExSocios.Count > 0)
                {

                    for (int i = 0; i < Model.AcumuladoExSocios.Count; i++)
                    {
                        <tr id="@Model.AcumuladoExSocios[i].IdPersona" data-type="ExSocio" data-row="@i">
                            <td>@Model.AcumuladoExSocios[i].Socio</td>
                            <td>
                                <div>
                                    $ @Model.AcumuladoExSocios[i].SaldoInicial.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div>
                                    $ @Model.AcumuladoExSocios[i].ImporteDistribucion.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="ImporteBienesPersonales_@Model.AcumuladoExSocios[i].IdPersona" data-val="@Model.AcumuladoExSocios[i].BienesPersonales">
                                    $ @(Model.AcumuladoExSocios[i].BienesPersonales.ToString("N0"))

                                </div>
                            </td>

                            <td>
                                <div id="ImporteSaldoDDJJBienes_@Model.AcumuladoExSocios[i].IdPersona" data-val="@Model.AcumuladoExSocios[i].SaldoDDJJBienes">
                                    $ @(Model.AcumuladoExSocios[i].SaldoDDJJBienes.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="ImporteGanancias_@Model.AcumuladoExSocios[i].IdPersona" data-val="@Model.AcumuladoExSocios[i].Ganancias">
                                    $ @(Model.AcumuladoExSocios[i].Ganancias.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSaldoDDJJGanancias_@Model.AcumuladoExSocios[i].IdPersona" data-val="@Model.AcumuladoExSocios[i].SaldoDDJJGanancias">
                                    $ @(Model.AcumuladoExSocios[i].SaldoDDJJGanancias.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="ImporteImpuestoCedular_@Model.AcumuladoExSocios[i].IdPersona" data-val="@Model.AcumuladoExSocios[i].ImpuestoCedular">
                                    $ @(Model.AcumuladoExSocios[i].ImpuestoCedular.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="ImporteSaldoDDJJCedular_@Model.AcumuladoExSocios[i].IdPersona" data-val="@Model.AcumuladoExSocios[i].SaldoDDJJCedular">
                                    $ @(Model.AcumuladoExSocios[i].SaldoDDJJCedular.ToString("N0"))
                                </div>
                            </td>

                            <td>
                                <div id="Importe_@Model.AcumuladoExSocios[i].IdPersona">

                                    @{
                                        long AcumuladoExSocio = (Model.AcumuladoExSocios[i].SaldoInicial - (Model.AcumuladoExSocios[i].ImpuestoCedular + Model.AcumuladoExSocios[i].SaldoDDJJCedular +
                                                                                                                             Model.AcumuladoExSocios[i].SaldoDDJJGanancias + Model.AcumuladoExSocios[i].Ganancias +
                                                                                                                             Model.AcumuladoExSocios[i].SaldoDDJJBienes + Model.AcumuladoExSocios[i].BienesPersonales +
                                                                                                                             Model.AcumuladoExSocios[i].ImporteDistribucion));
                                        Importe_TotalSaldoExSocios = Importe_TotalSaldoExSocios + AcumuladoExSocio;
                                    }
                                    $ @(AcumuladoExSocio.ToString("N0"))
                                </div>
                            </td>

                        </tr>
                    }

                    //---------------------total ExSocios
                }
                        <tr id="totalExSocios" class="bg-total">
                            <td>Total ExSocios</td>


                            <td>
                                <div id="">
                                    $ @Importe_TotalSaldoInicialExSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="">
                                    $ @Importe_TotalDistribuidoExSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_Importe_TotalBienesPersonalesExSocios" data-val="@Importe_TotalBienesPersonalesExSocios">
                                    $ @Importe_TotalBienesPersonalesExSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalSaldoDDJJBienesPersonalesExSocios" data-val="@Importe_TotalSaldoDDJJBienesPersonalesExSocios">
                                    $ @Importe_TotalSaldoDDJJBienesPersonalesExSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalImpuestosGananciasExSocios" data-val="@Importe_TotalImpuestosGananciasExSocios">
                                    $ @Importe_TotalImpuestosGananciasExSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalSaldoDDJJGananciasExSocios" data-val="@Importe_TotalSaldoDDJJGananciasExSocios">
                                    $ @Importe_TotalSaldoDDJJGananciasExSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalImpuestoCedularExSocios" data-val="@Importe_TotalImpuestoCedularExSocios">
                                    $ @Importe_TotalImpuestoCedularExSocios.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="Importe_TotalSaldoDDJJImpuestoCedularExSocios" data-val="@Importe_TotalSaldoDDJJImpuestoCedularExSocios">
                                    $ @Importe_TotalSaldoDDJJImpuestoCedularExSocios.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="Importe_TotalSaldoExSocios">
                                    $ @Importe_TotalSaldoExSocios.ToString("N0")
                                </div>

                            </td>
                        </tr>

                //------------------------------total final
                        <tr class="bg-totalGeneral">
                            <td>TOTAL</td>
                            
                            
                            <td>
                                <div id="">
                                    $ @SumaTotalSaldoInicial.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="">
                                    $ @SumaTotalDistribuido.ToString("N0")
                                </div>
                            </td>
                            <td>
                                <div id="SumaTotalBienesPersonales">
                                    $ @SumaTotalBienesPersonales.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="SumaTotalSaldoDDJJBienesPersonales">
                                    $ @SumaTotalSaldoDDJJBienesPersonales.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="SumaTotalImpuestosGanancias">
                                    $ @SumaTotalImpuestosGanancias.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="SumaTotalSaldoDDJJGanancias">
                                    $ @SumaTotalSaldoDDJJGanancias.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="SumaTotalImpuestoCedular">
                                    $ @SumaTotalImpuestoCedular.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="SumaTotalSaldoDDJJImpuestoCedular">
                                    $ @SumaTotalSaldoDDJJImpuestoCedular.ToString("N0")
                                </div>
                            </td>

                            <td>
                                <div id="total">
                                    $ @((Importe_TotalSaldoSocios + Importe_TotalSaldoExSocios).ToString("N0"))
                                </div>
                            </td>
                        </tr>
            }

        </tbody>
    </table>

</div>