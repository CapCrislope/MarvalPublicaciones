function IniciarTablaNewsletters(){$.fn.dataTable.ext.errMode="none";$("#Tabla"+frmNews).on("error.dt",function(){CargarAlertas(frmNews)});var n=$("#Tabla"+frmNews).dataTable({dom:"lfrti",order:[[0,"desc"]],columnDefs:[{type:"fecha",targets:0}],aoColumns:[{data:"Fecha",sWidth:"10%"},{data:"Titulo",sWidth:"30%"},{data:"Area",sWidth:"35%"},{sWidth:"15%",sClass:"der",orderable:!1,render:function(n,t,i){return RenderizarBotonesGrilla(i)}}],sAjaxSource:"/Newsletters/LlenarJSONGrilla",sServerMethod:"POST",bProcessing:!0,bAutoWidth:!1,pageLength:25,fnServerData:function(n,t,i){$.ajax({type:"POST",dataType:"json",url:n,success:i})},fnDrawCallback:function(){return EventHandlerBotonesGrillaNewsletter()}})}function EventHandlerBotonesGrillaNewsletter(){$(".dt-button").removeClass("dt-button");$(".btnVisible").on("click",function(){var n=$(this);$.ajax({type:"POST",dataType:"json",url:"/Newsletters/SetVisible",data:{id:n.attr("data-IdNewsletter"),state:n.val()==="1"?"0":"1"}}).success(function(t){t.IsEverythingGood?n.val()==="1"?(n.val(0),n.removeClass("btn-success").addClass("btn-danger")):(n.val(1),n.removeClass("btn-danger").addClass("btn-success")):t.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmNews)})});$(".btnEditar").on("click",function(){CargarModalNewsletter($(this).attr("data-IdNewsletter"))});$('[data-toggle="confirmation"]').confirmation({singleton:!0,placement:"left",title:"Eliminar",btnOkLabel:"Si",btnCancelLabel:"No",onConfirm:function(){return BorrarRegistroNewsletter($(this).attr("data-IdNewsletter"))}})}function RenderizarBotonesGrilla(n){var t="";return t+='<button type="button" class="btnVisible btn '+(n.Visible===1?"btn-success":"btn-danger")+' btn-xs space1" data-IdNewsletter='+n.Id+' value="'+n.Visible+'">                <span class="glyphicon glyphicon-off"><\/span>            <\/button>',t+='<button type="button" class="btnEditar btn btn-default btn-xs space1" data-IdNewsletter='+n.Id+'>                <span class="glyphicon glyphicon-edit"><\/span>            <\/button>',t+('<button type="button" id="enc'+n.Id+'" class="btnEliminar btn btn-default btn-xs" data-IdNewsletter='+n.Id+' data-toggle="confirmation">                <span class="glyphicon glyphicon-remove"><\/span>            <\/button>')}function CargarModalNewsletter(n){$("#dialog").load("/Newsletters/Modal",{id:n},function(n,t){t=="success"?$("#dialog").modal("show"):CargarAlertas(frmNews)})}function BorrarRegistroNewsletter(n){$.post("/Newsletters/DeleteById",{id:n}).success(function(n){n.IsEverythingGood?ReloadTable("Tabla"+frmNews,!1):n.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmNews)})}function AltaNewsletters(){CargarModalNewsletter("")}var frmNews="Newsletters";