function IniciarCombosHomeNovedad(){return new Combo({name:"AreasPracticas",view:frmNovedad,actionController:"/AreaPractica/LlenarAreasPracticas/"}).createBasicCombo(),new Combo({name:"Profesionales",view:frmNovedad,actionController:"/Profesional/LlenarProfesionales/"}).createBasicCombo(),!1}function FiltrosBusquedaNovedad(){$("#filstrosBusquedaNovedad").hasClass("shown")?($("#filstrosBusquedaNovedad").slideUp(400),$("#filstrosBusquedaNovedad").removeClass("shown"),$("span",$(".desplegableFiltros")).removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")):($("#filstrosBusquedaNovedad").slideDown(400),$("#filstrosBusquedaNovedad").addClass("shown"),$("span",$(".desplegableFiltros")).removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"))}function LimpiarFormBusquedaNovedad(){$("#hAreasPracticas"+frmNovedad).val("");$("#hProfesionales"+frmNovedad).val("");$("#ddlAreasPracticas"+frmNovedad)[0].selectize.clear();$("#ddlProfesionales"+frmNovedad)[0].selectize.clear();$("#busqueda_Desde").val("");$("#busqueda_Hasta").val("")}function BuscarNovedades(){$("#BusquedaNovedadForm").valid()&&ReloadTable("TablaNovedad")}function ExportarExcelCompletoNovedades(){$("#TablaNovedad td.dataTables_empty").length==0?$.post("/Novedad/GenerarExcelCompletoNovedades",$("#BusquedaNovedadForm").serialize()).success(function(n){n.IsEverythingGood==!0&&(window.location="/Novedad/ExportarExcelCompleto?token="+n.Token)}).always(function(){CargarAlertas(frmNovedad)}):Danger("Debe haber, por lo menos, 1 registro en la grilla.")}function IniciarTablaNovedad(){$.fn.dataTable.ext.errMode="none";$("#TablaNovedad").on("error.dt",function(){CargarAlertas(frmNovedad)});var n=$("#TablaNovedad").dataTable({dom:"Blfrtip",buttons:[{text:'<span class="iconoExcel" aria-hidden="true" title="Exportar a Excel"><\/span>',className:"btn btn-default btn-sm btn-imagen space1",action:function(){ExportarExcelCompletoNovedades()}}],order:[[0,"desc"]],columnDefs:[{type:"fecha",targets:0}],sAjaxSource:"/Novedad/LlenarJSONGrillaNovedad",sServerMethod:"POST",aoColumns:[{data:"date",sWidth:"10%",mRender:function(n){return n||""}},{data:"featured",sWidth:"10%",mRender:function(n){return n==1?"Sí":"No"}},{data:"title_es",sWidth:"70%"},{data:"id",sWidth:"10%",sClass:"der",orderable:!1,sWidth:"10%",render:function(n,t,i){return BotoneraGrillaNovedad(i)}}],bAutoWidth:!1,bProcessing:!0,pageLength:50,language:{select:{rows:". %d filas seleccionadas"}},fnDrawCallback:function(){FuncionesBotoneraGrillaNovedad()},fnServerData:function(n,t,i){$.ajax({dataType:"json",type:"POST",url:n,data:$("#BusquedaNovedadForm").serialize(),success:i})}})}function BotoneraGrillaNovedad(n){return""+('        <button type="button" class="habilitadoNovedad btn '+(n.Visible?"btn-success":"btn-danger")+' btn-xs space1" clientid="'+n.id+'" value="false" style="cursor: default">            <span class="glyphicon glyphicon-off"><\/span>        <\/button>        <button type="button" class="editDialog btn btn-default btn-xs" data-clientid="'+n.id+'" title="Editar">             <span class="glyphicon glyphicon-edit" aria-hidden="true"><\/span>         <\/button>         <button type="button" id="mat_'+n.id+'" class="btn btn-default btn-xs" data-toggle="confirmation" data-placement="left" data-singleton="true" data-on-confirm="EliminarNovedad" data-title="¿Está seguro?" onclick="SelNovedad('+n.id+');">             <span class="glyphicon glyphicon-remove" aria-hidden="true">             <\/span>         <\/button>')}function EliminarNovedad(){var n=$("#hIdNovedad").val();$.post("/Novedad/EliminarNovedad",{idNovedad:n}).success(function(n){n.IsEverythingGood==!0?ReloadTable("TablaNovedad",!1):n.IsRedirect&&(window.location.href="/Home/Login")}).always(function(){CargarAlertas(frmNovedad)})}function SelNovedad(n){$("#hIdNovedad").val(n)}function AltaNovedad(){ModalNovedad(null,function(){IniciarCombosModalNovedad()})}function FuncionesBotoneraGrillaNovedad(){$("[data-toggle=confirmation]").confirmation();$(".dt-button").removeClass("dt-button");$(".dt-buttons").addClass("space1");$(".editDialog").off().on("click",function(){ModalNovedad($(this).data("clientid"),function(){IniciarCombosModalNovedad(JSON.parse("["+$("#hAreasPracticas"+frmModal).val()+"]"),JSON.parse("["+$("#hProfesionales"+frmModal).val()+"]"),$("#hkind_id"+frmModal).val(),$("#hImagenPosY"+frmModal).val())})});$(".habilitadoNovedad").off().on("click",function(){var n=$(this),i=n.attr("clientid"),t=n.attr("value");return $.post("/Novedad/HabilitarNovedad/",{idNovedad:i,value:t}).success(function(i){i.IsEverythingGood==!0&&(t=="true"?(n.attr("value",!1),n.removeClass("btn-danger"),n.addClass("btn-success")):(n.attr("value",!0),n.removeClass("btn-success"),n.addClass("btn-danger")));CargarAlertas(frmNovedad)}),!1})}function ModalNovedad(n,t){$("#dialog").load("/Novedad/ModalNovedad",{idNovedad:n},function(n,i){i=="success"?($("#dialog").modal("show"),t&&t()):CargarAlertas(frmNovedad)})}var frmNovedad="Novedad";